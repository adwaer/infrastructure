2020-08-23 18:23:12.609 +03:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Serilog.Extensions.Hosting.DiagnosticContext' while attempting to activate 'Serilog.AspNetCore.RequestLoggingMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass4_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
2020-08-23 18:23:12.707 +03:00 [FTL] Unhandled exception, System.InvalidOperationException
System.InvalidOperationException: Unable to resolve service for type 'Serilog.Extensions.Hosting.DiagnosticContext' while attempting to activate 'Serilog.AspNetCore.RequestLoggingMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass4_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Identity.Simple.Program.Main(String[] args) in E:\Projects\_mine\infrastructure\examples\identity\Identity.Simple\Program.cs:line 17
2020-08-23 18:26:10.817 +03:00 [DBG] Hosting starting
2020-08-23 18:26:10.956 +03:00 [INF] User profile is available. Using 'C:\Users\adwae\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-23 18:26:10.990 +03:00 [DBG] Reading data from file 'C:\Users\adwae\AppData\Local\ASP.NET\DataProtection-Keys\key-37a38d35-de78-4599-9855-bf9aa01642e4.xml'.
2020-08-23 18:26:11.022 +03:00 [DBG] Reading data from file 'C:\Users\adwae\AppData\Local\ASP.NET\DataProtection-Keys\key-59817979-158b-45ef-a6a2-f2360343a028.xml'.
2020-08-23 18:26:11.030 +03:00 [DBG] Found key "37a38d35-de78-4599-9855-bf9aa01642e4".
2020-08-23 18:26:11.038 +03:00 [DBG] Found key "59817979-158b-45ef-a6a2-f2360343a028".
2020-08-23 18:26:11.047 +03:00 [DBG] Considering key "59817979-158b-45ef-a6a2-f2360343a028" with expiration date "2020-10-04T17:37:43.3250722+00:00" as default key.
2020-08-23 18:26:11.095 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=3.1.3.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-08-23 18:26:11.100 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2020-08-23 18:26:11.106 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=3.1.3.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-08-23 18:26:11.114 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2020-08-23 18:26:11.129 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2020-08-23 18:26:11.145 +03:00 [DBG] Using key "59817979-158b-45ef-a6a2-f2360343a028" as the default key.
2020-08-23 18:26:11.147 +03:00 [DBG] Key ring with default key "59817979-158b-45ef-a6a2-f2360343a028" was loaded during application startup.
2020-08-23 18:26:11.510 +03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-08-23 18:26:11.627 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C321FB7814B4B11FA1E331D9EF01FA785796637D)
2020-08-23 18:26:11.698 +03:00 [INF] Now listening on: https://localhost:8001
2020-08-23 18:26:11.700 +03:00 [DBG] Loaded hosting startup assembly Identity.Simple
2020-08-23 18:26:11.703 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-08-23 18:26:11.704 +03:00 [INF] Hosting environment: Development
2020-08-23 18:26:11.707 +03:00 [INF] Content root path: E:\Projects\_mine\infrastructure\examples\identity\Identity.Simple
2020-08-23 18:26:11.712 +03:00 [DBG] Hosting started
2020-08-23 18:26:19.606 +03:00 [DBG] Connection id "0HM27F3H9ABCF" accepted.
2020-08-23 18:26:19.611 +03:00 [DBG] Connection id "0HM27F3H9ABCG" accepted.
2020-08-23 18:26:19.611 +03:00 [DBG] Connection id "0HM27F3H9ABCF" started.
2020-08-23 18:26:19.613 +03:00 [DBG] Connection id "0HM27F3H9ABCG" started.
2020-08-23 18:26:19.725 +03:00 [DBG] Connection id "0HM27F3H9ABCF" received FIN.
2020-08-23 18:26:19.726 +03:00 [DBG] Connection id "0HM27F3H9ABCH" accepted.
2020-08-23 18:26:19.725 +03:00 [DBG] Connection id "0HM27F3H9ABCG" received FIN.
2020-08-23 18:26:19.736 +03:00 [DBG] Connection id "0HM27F3H9ABCH" started.
2020-08-23 18:26:19.758 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): При обработке сертификата произошла неизвестная ошибка.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.StartSendAuthResetSignal(ProtocolToken message, AsyncProtocolRequest asyncRequest, ExceptionDispatchInfo exception)
   at System.Net.Security.SslStream.CheckCompletionBeforeNextReceive(ProtocolToken message, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessReceivedBlob(Byte[] buffer, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslStream.ThrowIfExceptional()
   at System.Net.Security.SslStream.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-08-23 18:26:19.759 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): При обработке сертификата произошла неизвестная ошибка.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.StartSendAuthResetSignal(ProtocolToken message, AsyncProtocolRequest asyncRequest, ExceptionDispatchInfo exception)
   at System.Net.Security.SslStream.CheckCompletionBeforeNextReceive(ProtocolToken message, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessReceivedBlob(Byte[] buffer, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslStream.ThrowIfExceptional()
   at System.Net.Security.SslStream.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-08-23 18:26:19.837 +03:00 [DBG] Connection id "0HM27F3H9ABCG" stopped.
2020-08-23 18:26:19.850 +03:00 [DBG] Connection id "0HM27F3H9ABCF" stopped.
2020-08-23 18:26:19.854 +03:00 [DBG] Connection id "0HM27F3H9ABCG" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-08-23 18:26:19.855 +03:00 [DBG] Connection id "0HM27F3H9ABCF" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-08-23 18:26:19.876 +03:00 [INF] Request starting HTTP/2 GET https://localhost:8001/  
2020-08-23 18:26:19.883 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-08-23 18:26:19.964 +03:00 [DBG] The request path  does not match the path filter
2020-08-23 18:26:20.009 +03:00 [DBG] 1 candidate(s) found for the request path '/'
2020-08-23 18:26:20.012 +03:00 [DBG] Request matched endpoint '/ HTTP: GET'
2020-08-23 18:26:20.014 +03:00 [INF] Executing endpoint '/ HTTP: GET'
2020-08-23 18:26:20.028 +03:00 [INF] Executed endpoint '/ HTTP: GET'
2020-08-23 18:26:20.035 +03:00 [INF] HTTP GET / responded 200 in 143.4227 ms
2020-08-23 18:26:20.045 +03:00 [INF] Request finished in 171.3612ms 200 
2020-08-23 18:26:20.193 +03:00 [INF] Request starting HTTP/2 GET https://localhost:8001/favicon.ico  
2020-08-23 18:26:20.195 +03:00 [DBG] The request path  does not match the path filter
2020-08-23 18:26:20.198 +03:00 [DBG] No candidates found for the request path '/favicon.ico'
2020-08-23 18:26:20.199 +03:00 [DBG] Request did not match any endpoints
2020-08-23 18:26:20.201 +03:00 [INF] HTTP GET /favicon.ico responded 404 in 5.7169 ms
2020-08-23 18:26:20.207 +03:00 [INF] Request finished in 13.2402ms 404 
2020-08-23 18:26:24.005 +03:00 [INF] Request starting HTTP/2 GET https://localhost:8001/swagger  
2020-08-23 18:26:24.008 +03:00 [INF] HTTP GET /swagger responded 301 in 1.5031 ms
2020-08-23 18:26:24.011 +03:00 [INF] Request finished in 6.5704ms 301 
2020-08-23 18:26:24.017 +03:00 [INF] Request starting HTTP/2 GET https://localhost:8001/swagger/index.html  
2020-08-23 18:26:24.055 +03:00 [INF] HTTP GET /swagger/index.html responded 200 in 36.7683 ms
2020-08-23 18:26:24.059 +03:00 [INF] Request finished in 42.1712ms 200 text/html;charset=utf-8
2020-08-23 18:26:24.083 +03:00 [INF] Request starting HTTP/2 GET https://localhost:8001/swagger/swagger-ui.css  
2020-08-23 18:26:24.084 +03:00 [INF] Request starting HTTP/2 GET https://localhost:8001/swagger/swagger-ui-standalone-preset.js  
2020-08-23 18:26:24.084 +03:00 [INF] Request starting HTTP/2 GET https://localhost:8001/swagger/swagger-ui-bundle.js  
2020-08-23 18:26:24.164 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2020-08-23 18:26:24.169 +03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2020-08-23 18:26:24.179 +03:00 [INF] HTTP GET /swagger/swagger-ui.css responded 200 in 93.7282 ms
2020-08-23 18:26:24.190 +03:00 [INF] HTTP GET /swagger/swagger-ui-standalone-preset.js responded 200 in 103.0369 ms
2020-08-23 18:26:24.194 +03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2020-08-23 18:26:24.197 +03:00 [INF] Request finished in 114.4237ms 200 text/css
2020-08-23 18:26:24.198 +03:00 [INF] Request finished in 114.4977ms 200 application/javascript
2020-08-23 18:26:24.201 +03:00 [INF] HTTP GET /swagger/swagger-ui-bundle.js responded 200 in 95.5807 ms
2020-08-23 18:26:24.209 +03:00 [INF] Request finished in 125.3116ms 200 application/javascript
2020-08-23 18:26:24.464 +03:00 [INF] Request starting HTTP/2 GET https://localhost:8001/swagger/v1/swagger.json  
2020-08-23 18:26:24.490 +03:00 [INF] Request starting HTTP/2 GET https://localhost:8001/swagger/favicon-32x32.png  
2020-08-23 18:26:24.492 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2020-08-23 18:26:24.494 +03:00 [INF] HTTP GET /swagger/favicon-32x32.png responded 200 in 2.4471 ms
2020-08-23 18:26:24.496 +03:00 [INF] Request finished in 6.4276ms 200 image/png
2020-08-23 18:26:24.609 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 143.3456 ms
2020-08-23 18:26:24.613 +03:00 [INF] Request finished in 148.5265ms 200 application/json;charset=utf-8
2020-08-23 18:26:34.497 +03:00 [INF] Request starting HTTP/2 POST https://localhost:8001/api/Auth application/json 38
2020-08-23 18:26:34.508 +03:00 [DBG] Connection id "0HM27F3H9ABCH", Request id "0HM27F3H9ABCH:00000013": started reading request body.
2020-08-23 18:26:34.511 +03:00 [DBG] Connection id "0HM27F3H9ABCH", Request id "0HM27F3H9ABCH:00000013": done reading request body.
2020-08-23 18:26:34.516 +03:00 [DBG] The request has an origin header: 'https://localhost:8001'.
2020-08-23 18:26:34.519 +03:00 [INF] CORS policy execution failed.
2020-08-23 18:26:34.521 +03:00 [INF] Request origin https://localhost:8001 does not have permission to access the resource.
2020-08-23 18:26:34.527 +03:00 [DBG] POST requests are not supported
2020-08-23 18:26:34.531 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth'
2020-08-23 18:26:34.536 +03:00 [DBG] Endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)' with route pattern 'api/Auth' is valid for the request path '/api/Auth'
2020-08-23 18:26:34.538 +03:00 [DBG] Request matched endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:26:34.539 +03:00 [INF] Executing endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:26:34.552 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-08-23 18:26:34.612 +03:00 [INF] Route matched with {action = "ByPwd", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] ByPwd(Identity.Simple.Models.PwdAuthRequest) on controller Identity.Simple.Controllers.AuthController (Identity.Simple).
2020-08-23 18:26:34.616 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-08-23 18:26:34.618 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-08-23 18:26:34.620 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-08-23 18:26:34.622 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-08-23 18:26:34.624 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-08-23 18:26:34.626 +03:00 [DBG] Executing controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 18:26:34.777 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2020-08-23 18:26:34.830 +03:00 [DBG] Executed controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 18:26:34.865 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 18:26:34.873 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' using the name '' in request data ...
2020-08-23 18:26:34.880 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2020-08-23 18:26:34.892 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Identity.Simple.Models.PwdAuthRequest'
2020-08-23 18:26:34.896 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:26:34.898 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:26:34.901 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 18:26:34.909 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:26:35.504 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2020-08-23 18:26:35.506 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2020-08-23 18:26:35.564 +03:00 [INF] Entity Framework Core 3.1.6 initialized 'IdentityCtx' using provider 'Microsoft.EntityFrameworkCore.InMemory' with options: StoreName=indetity.simple 
2020-08-23 18:26:35.754 +03:00 [DBG] queryContext => new QueryingEnumerable<User>(
    queryContext, 
    new ResultEnumerable(() => InMemoryShapedQueryCompilingExpressionVisitor.Table(
        queryContext: queryContext, 
        entityType: EntityType: User)
        .Where(valueBuffer => EntityMaterializerSource.TryReadValue<string>(valueBuffer, 9, Property: User.NormalizedEmail (string) Index MaxLength256) == InMemoryExpressionTranslatingExpressionVisitor.GetParameterValue<string>(
            queryContext: queryContext, 
            parameterName: "__normalizedEmail_0"))
        .SingleOrDefault())
        .Select(valueBuffer => new ValueBuffer(new object[]
        { 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 0, Property: User.Id (string) Required PK AfterSave:Throw), 
            (object)EntityMaterializerSource.TryReadValue<int>(valueBuffer, 1, Property: User.AccessFailedCount (int) Required), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 2, Property: User.Email (string) MaxLength256), 
            (object)EntityMaterializerSource.TryReadValue<bool>(valueBuffer, 3, Property: User.EmailConfirmed (bool) Required), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 4, Property: User.FacebookId (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 5, Property: User.GoogleId (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 6, Property: User.LinkedinId (string)), 
            (object)EntityMaterializerSource.TryReadValue<bool>(valueBuffer, 7, Property: User.LockoutEnabled (bool) Required), 
            (object)EntityMaterializerSource.TryReadValue<Nullable<DateTimeOffset>>(valueBuffer, 8, Property: User.LockoutEnd (Nullable<DateTimeOffset>)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 9, Property: User.NormalizedEmail (string) Index MaxLength256), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 10, Property: User.NormalizedUserName (string) Index MaxLength256), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 11, Property: User.PasswordHash (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 12, Property: User.PhoneNumber (string)), 
            (object)EntityMaterializerSource.TryReadValue<bool>(valueBuffer, 13, Property: User.PhoneNumberConfirmed (bool) Required), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 14, Property: User.Salt (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 15, Property: User.SecurityStamp (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 16, Property: User.UserName (string) MaxLength256) 
        })), 
    Func<QueryContext, ValueBuffer, User>, 
    Identity.Dal.IdentityCtx, 
    null
)
    .SingleOrDefault()
2020-08-23 18:26:35.777 +03:00 [INF] Entity Framework Core 3.1.6 initialized 'IdentityCtx' using provider 'Microsoft.EntityFrameworkCore.InMemory' with options: StoreName=indetity.simple 
2020-08-23 18:26:35.935 +03:00 [INF] Executed action Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple) in 1306.8648ms
2020-08-23 18:26:35.938 +03:00 [INF] Executed endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:26:35.953 +03:00 [INF] HTTP POST /api/Auth responded 400 in 1453.7169 ms
2020-08-23 18:26:35.962 +03:00 [DBG] 'IdentityCtx' disposed.
2020-08-23 18:26:35.965 +03:00 [INF] Request finished in 1468.0048ms 400 application/json
2020-08-23 18:27:57.373 +03:00 [DBG] Hosting starting
2020-08-23 18:27:57.492 +03:00 [INF] User profile is available. Using 'C:\Users\adwae\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-23 18:27:57.525 +03:00 [DBG] Reading data from file 'C:\Users\adwae\AppData\Local\ASP.NET\DataProtection-Keys\key-37a38d35-de78-4599-9855-bf9aa01642e4.xml'.
2020-08-23 18:27:57.552 +03:00 [DBG] Reading data from file 'C:\Users\adwae\AppData\Local\ASP.NET\DataProtection-Keys\key-59817979-158b-45ef-a6a2-f2360343a028.xml'.
2020-08-23 18:27:57.559 +03:00 [DBG] Found key "37a38d35-de78-4599-9855-bf9aa01642e4".
2020-08-23 18:27:57.569 +03:00 [DBG] Found key "59817979-158b-45ef-a6a2-f2360343a028".
2020-08-23 18:27:57.577 +03:00 [DBG] Considering key "59817979-158b-45ef-a6a2-f2360343a028" with expiration date "2020-10-04T17:37:43.3250722+00:00" as default key.
2020-08-23 18:27:57.611 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=3.1.3.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-08-23 18:27:57.617 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2020-08-23 18:27:57.620 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=3.1.3.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-08-23 18:27:57.625 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2020-08-23 18:27:57.630 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2020-08-23 18:27:57.635 +03:00 [DBG] Using key "59817979-158b-45ef-a6a2-f2360343a028" as the default key.
2020-08-23 18:27:57.638 +03:00 [DBG] Key ring with default key "59817979-158b-45ef-a6a2-f2360343a028" was loaded during application startup.
2020-08-23 18:27:58.036 +03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-08-23 18:27:58.129 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C321FB7814B4B11FA1E331D9EF01FA785796637D)
2020-08-23 18:27:58.186 +03:00 [INF] Now listening on: https://localhost:8001
2020-08-23 18:27:58.187 +03:00 [DBG] Loaded hosting startup assembly Identity.Simple
2020-08-23 18:27:58.189 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-08-23 18:27:58.190 +03:00 [INF] Hosting environment: Development
2020-08-23 18:27:58.191 +03:00 [INF] Content root path: E:\Projects\_mine\infrastructure\examples\identity\Identity.Simple
2020-08-23 18:27:58.193 +03:00 [DBG] Hosting started
2020-08-23 18:28:00.796 +03:00 [DBG] Connection id "0HM27F4FEC4CN" accepted.
2020-08-23 18:28:00.799 +03:00 [DBG] Connection id "0HM27F4FEC4CN" started.
2020-08-23 18:28:00.872 +03:00 [DBG] Connection id "0HM27F4FEC4CO" accepted.
2020-08-23 18:28:00.872 +03:00 [DBG] Connection id "0HM27F4FEC4CN" received FIN.
2020-08-23 18:28:00.876 +03:00 [DBG] Connection id "0HM27F4FEC4CO" started.
2020-08-23 18:28:00.891 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): При обработке сертификата произошла неизвестная ошибка.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.StartSendAuthResetSignal(ProtocolToken message, AsyncProtocolRequest asyncRequest, ExceptionDispatchInfo exception)
   at System.Net.Security.SslStream.CheckCompletionBeforeNextReceive(ProtocolToken message, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessReceivedBlob(Byte[] buffer, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslStream.ThrowIfExceptional()
   at System.Net.Security.SslStream.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-08-23 18:28:00.951 +03:00 [DBG] Connection id "0HM27F4FEC4CN" stopped.
2020-08-23 18:28:00.953 +03:00 [DBG] Connection id "0HM27F4FEC4CN" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-08-23 18:28:00.973 +03:00 [INF] Request starting HTTP/2 POST https://localhost:8001/api/Auth application/json 38
2020-08-23 18:28:00.978 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-08-23 18:28:00.985 +03:00 [DBG] Connection id "0HM27F4FEC4CO", Request id "0HM27F4FEC4CO:00000001": started reading request body.
2020-08-23 18:28:00.988 +03:00 [DBG] Connection id "0HM27F4FEC4CO", Request id "0HM27F4FEC4CO:00000001": done reading request body.
2020-08-23 18:28:00.994 +03:00 [DBG] The request has an origin header: 'https://localhost:8001'.
2020-08-23 18:28:00.995 +03:00 [INF] CORS policy execution failed.
2020-08-23 18:28:00.997 +03:00 [INF] Request origin https://localhost:8001 does not have permission to access the resource.
2020-08-23 18:28:01.064 +03:00 [DBG] POST requests are not supported
2020-08-23 18:28:01.095 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth'
2020-08-23 18:28:01.102 +03:00 [DBG] Endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)' with route pattern 'api/Auth' is valid for the request path '/api/Auth'
2020-08-23 18:28:01.106 +03:00 [DBG] Request matched endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:28:01.107 +03:00 [INF] Executing endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:28:01.120 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-08-23 18:28:01.178 +03:00 [INF] Route matched with {action = "ByPwd", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] ByPwd(Identity.Simple.Models.PwdAuthRequest) on controller Identity.Simple.Controllers.AuthController (Identity.Simple).
2020-08-23 18:28:01.181 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-08-23 18:28:01.183 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-08-23 18:28:01.185 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-08-23 18:28:01.188 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-08-23 18:28:01.190 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-08-23 18:28:01.192 +03:00 [DBG] Executing controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 18:28:01.300 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2020-08-23 18:28:01.321 +03:00 [DBG] Executed controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 18:28:01.341 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 18:28:01.347 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' using the name '' in request data ...
2020-08-23 18:28:01.351 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2020-08-23 18:28:01.365 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Identity.Simple.Models.PwdAuthRequest'
2020-08-23 18:28:01.366 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:28:01.369 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:28:01.371 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 18:28:01.376 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:28:01.977 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2020-08-23 18:28:01.980 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2020-08-23 18:28:02.036 +03:00 [INF] Entity Framework Core 3.1.6 initialized 'IdentityCtx' using provider 'Microsoft.EntityFrameworkCore.InMemory' with options: StoreName=indetity.simple 
2020-08-23 18:28:02.218 +03:00 [DBG] queryContext => new QueryingEnumerable<User>(
    queryContext, 
    new ResultEnumerable(() => InMemoryShapedQueryCompilingExpressionVisitor.Table(
        queryContext: queryContext, 
        entityType: EntityType: User)
        .Where(valueBuffer => EntityMaterializerSource.TryReadValue<string>(valueBuffer, 9, Property: User.NormalizedEmail (string) Index MaxLength256) == InMemoryExpressionTranslatingExpressionVisitor.GetParameterValue<string>(
            queryContext: queryContext, 
            parameterName: "__normalizedEmail_0"))
        .SingleOrDefault())
        .Select(valueBuffer => new ValueBuffer(new object[]
        { 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 0, Property: User.Id (string) Required PK AfterSave:Throw), 
            (object)EntityMaterializerSource.TryReadValue<int>(valueBuffer, 1, Property: User.AccessFailedCount (int) Required), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 2, Property: User.Email (string) MaxLength256), 
            (object)EntityMaterializerSource.TryReadValue<bool>(valueBuffer, 3, Property: User.EmailConfirmed (bool) Required), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 4, Property: User.FacebookId (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 5, Property: User.GoogleId (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 6, Property: User.LinkedinId (string)), 
            (object)EntityMaterializerSource.TryReadValue<bool>(valueBuffer, 7, Property: User.LockoutEnabled (bool) Required), 
            (object)EntityMaterializerSource.TryReadValue<Nullable<DateTimeOffset>>(valueBuffer, 8, Property: User.LockoutEnd (Nullable<DateTimeOffset>)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 9, Property: User.NormalizedEmail (string) Index MaxLength256), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 10, Property: User.NormalizedUserName (string) Index MaxLength256), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 11, Property: User.PasswordHash (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 12, Property: User.PhoneNumber (string)), 
            (object)EntityMaterializerSource.TryReadValue<bool>(valueBuffer, 13, Property: User.PhoneNumberConfirmed (bool) Required), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 14, Property: User.Salt (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 15, Property: User.SecurityStamp (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 16, Property: User.UserName (string) MaxLength256) 
        })), 
    Func<QueryContext, ValueBuffer, User>, 
    Identity.Dal.IdentityCtx, 
    null
)
    .SingleOrDefault()
2020-08-23 18:28:02.269 +03:00 [INF] Entity Framework Core 3.1.6 initialized 'IdentityCtx' using provider 'Microsoft.EntityFrameworkCore.InMemory' with options: StoreName=indetity.simple 
2020-08-23 18:28:02.371 +03:00 [DBG] 'IdentityCtx' generated a value for the 'Id' property of new 'SimpleMessageResult' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:28:02.405 +03:00 [DBG] Context 'IdentityCtx' started tracking 'SimpleMessageResult' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:28:02.411 +03:00 [DBG] SaveChanges starting for 'IdentityCtx'.
2020-08-23 18:28:02.415 +03:00 [DBG] DetectChanges starting for 'IdentityCtx'.
2020-08-23 18:28:02.433 +03:00 [DBG] DetectChanges completed for 'IdentityCtx'.
2020-08-23 18:28:02.456 +03:00 [INF] Saved 1 entities to in-memory store.
2020-08-23 18:28:02.464 +03:00 [DBG] An 'SimpleMessageResult' entity tracked by 'IdentityCtx' changed from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:28:02.471 +03:00 [DBG] SaveChanges completed for 'IdentityCtx' with 1 entities written to the database.
2020-08-23 18:29:05.339 +03:00 [DBG] Hosting starting
2020-08-23 18:29:05.485 +03:00 [INF] User profile is available. Using 'C:\Users\adwae\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-23 18:29:05.538 +03:00 [DBG] Reading data from file 'C:\Users\adwae\AppData\Local\ASP.NET\DataProtection-Keys\key-37a38d35-de78-4599-9855-bf9aa01642e4.xml'.
2020-08-23 18:29:05.576 +03:00 [DBG] Reading data from file 'C:\Users\adwae\AppData\Local\ASP.NET\DataProtection-Keys\key-59817979-158b-45ef-a6a2-f2360343a028.xml'.
2020-08-23 18:29:05.591 +03:00 [DBG] Found key "37a38d35-de78-4599-9855-bf9aa01642e4".
2020-08-23 18:29:05.608 +03:00 [DBG] Found key "59817979-158b-45ef-a6a2-f2360343a028".
2020-08-23 18:29:05.616 +03:00 [DBG] Considering key "59817979-158b-45ef-a6a2-f2360343a028" with expiration date "2020-10-04T17:37:43.3250722+00:00" as default key.
2020-08-23 18:29:05.658 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=3.1.3.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-08-23 18:29:05.663 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2020-08-23 18:29:05.666 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=3.1.3.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-08-23 18:29:05.688 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2020-08-23 18:29:05.701 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2020-08-23 18:29:05.711 +03:00 [DBG] Using key "59817979-158b-45ef-a6a2-f2360343a028" as the default key.
2020-08-23 18:29:05.715 +03:00 [DBG] Key ring with default key "59817979-158b-45ef-a6a2-f2360343a028" was loaded during application startup.
2020-08-23 18:29:06.238 +03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-08-23 18:29:06.315 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C321FB7814B4B11FA1E331D9EF01FA785796637D)
2020-08-23 18:29:06.361 +03:00 [INF] Now listening on: https://localhost:8001
2020-08-23 18:29:06.363 +03:00 [DBG] Loaded hosting startup assembly Identity.Simple
2020-08-23 18:29:06.364 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-08-23 18:29:06.366 +03:00 [INF] Hosting environment: Development
2020-08-23 18:29:06.367 +03:00 [INF] Content root path: E:\Projects\_mine\infrastructure\examples\identity\Identity.Simple
2020-08-23 18:29:06.368 +03:00 [DBG] Hosting started
2020-08-23 18:29:09.122 +03:00 [DBG] Connection id "0HM27F53PVKFI" accepted.
2020-08-23 18:29:09.125 +03:00 [DBG] Connection id "0HM27F53PVKFI" started.
2020-08-23 18:29:09.195 +03:00 [DBG] Connection id "0HM27F53PVKFI" received FIN.
2020-08-23 18:29:09.198 +03:00 [DBG] Connection id "0HM27F53PVKFJ" accepted.
2020-08-23 18:29:09.201 +03:00 [DBG] Connection id "0HM27F53PVKFJ" started.
2020-08-23 18:29:09.213 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): При обработке сертификата произошла неизвестная ошибка.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.StartSendAuthResetSignal(ProtocolToken message, AsyncProtocolRequest asyncRequest, ExceptionDispatchInfo exception)
   at System.Net.Security.SslStream.CheckCompletionBeforeNextReceive(ProtocolToken message, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessReceivedBlob(Byte[] buffer, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslStream.ThrowIfExceptional()
   at System.Net.Security.SslStream.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-08-23 18:29:09.279 +03:00 [DBG] Connection id "0HM27F53PVKFI" stopped.
2020-08-23 18:29:09.283 +03:00 [DBG] Connection id "0HM27F53PVKFI" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-08-23 18:29:09.293 +03:00 [INF] Request starting HTTP/2 POST https://localhost:8001/api/Auth application/json 38
2020-08-23 18:29:09.298 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-08-23 18:29:09.313 +03:00 [DBG] Connection id "0HM27F53PVKFJ", Request id "0HM27F53PVKFJ:00000001": started reading request body.
2020-08-23 18:29:09.316 +03:00 [DBG] Connection id "0HM27F53PVKFJ", Request id "0HM27F53PVKFJ:00000001": done reading request body.
2020-08-23 18:29:09.324 +03:00 [DBG] The request has an origin header: 'https://localhost:8001'.
2020-08-23 18:29:09.329 +03:00 [INF] CORS policy execution failed.
2020-08-23 18:29:09.330 +03:00 [INF] Request origin https://localhost:8001 does not have permission to access the resource.
2020-08-23 18:29:09.387 +03:00 [DBG] POST requests are not supported
2020-08-23 18:29:09.428 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth'
2020-08-23 18:29:09.440 +03:00 [DBG] Endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)' with route pattern 'api/Auth' is valid for the request path '/api/Auth'
2020-08-23 18:29:09.442 +03:00 [DBG] Request matched endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:29:09.444 +03:00 [INF] Executing endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:29:09.468 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-08-23 18:29:09.519 +03:00 [INF] Route matched with {action = "ByPwd", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] ByPwd(Identity.Simple.Models.PwdAuthRequest) on controller Identity.Simple.Controllers.AuthController (Identity.Simple).
2020-08-23 18:29:09.523 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-08-23 18:29:09.524 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-08-23 18:29:09.527 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-08-23 18:29:09.529 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-08-23 18:29:09.532 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-08-23 18:29:09.536 +03:00 [DBG] Executing controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 18:29:09.644 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2020-08-23 18:29:09.676 +03:00 [DBG] Executed controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 18:29:09.701 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 18:29:09.709 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' using the name '' in request data ...
2020-08-23 18:29:09.713 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2020-08-23 18:29:09.723 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Identity.Simple.Models.PwdAuthRequest'
2020-08-23 18:29:09.725 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:29:09.727 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:29:09.730 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 18:29:09.737 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:29:22.344 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2020-08-23 18:29:22.348 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2020-08-23 18:29:22.417 +03:00 [INF] Entity Framework Core 3.1.6 initialized 'IdentityCtx' using provider 'Microsoft.EntityFrameworkCore.InMemory' with options: StoreName=indetity.simple 
2020-08-23 18:29:22.628 +03:00 [DBG] queryContext => new QueryingEnumerable<User>(
    queryContext, 
    new ResultEnumerable(() => InMemoryShapedQueryCompilingExpressionVisitor.Table(
        queryContext: queryContext, 
        entityType: EntityType: User)
        .Where(valueBuffer => EntityMaterializerSource.TryReadValue<string>(valueBuffer, 9, Property: User.NormalizedEmail (string) Index MaxLength256) == InMemoryExpressionTranslatingExpressionVisitor.GetParameterValue<string>(
            queryContext: queryContext, 
            parameterName: "__normalizedEmail_0"))
        .SingleOrDefault())
        .Select(valueBuffer => new ValueBuffer(new object[]
        { 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 0, Property: User.Id (string) Required PK AfterSave:Throw), 
            (object)EntityMaterializerSource.TryReadValue<int>(valueBuffer, 1, Property: User.AccessFailedCount (int) Required), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 2, Property: User.Email (string) MaxLength256), 
            (object)EntityMaterializerSource.TryReadValue<bool>(valueBuffer, 3, Property: User.EmailConfirmed (bool) Required), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 4, Property: User.FacebookId (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 5, Property: User.GoogleId (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 6, Property: User.LinkedinId (string)), 
            (object)EntityMaterializerSource.TryReadValue<bool>(valueBuffer, 7, Property: User.LockoutEnabled (bool) Required), 
            (object)EntityMaterializerSource.TryReadValue<Nullable<DateTimeOffset>>(valueBuffer, 8, Property: User.LockoutEnd (Nullable<DateTimeOffset>)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 9, Property: User.NormalizedEmail (string) Index MaxLength256), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 10, Property: User.NormalizedUserName (string) Index MaxLength256), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 11, Property: User.PasswordHash (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 12, Property: User.PhoneNumber (string)), 
            (object)EntityMaterializerSource.TryReadValue<bool>(valueBuffer, 13, Property: User.PhoneNumberConfirmed (bool) Required), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 14, Property: User.Salt (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 15, Property: User.SecurityStamp (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 16, Property: User.UserName (string) MaxLength256) 
        })), 
    Func<QueryContext, ValueBuffer, User>, 
    Identity.Dal.IdentityCtx, 
    null
)
    .SingleOrDefault()
2020-08-23 18:29:25.984 +03:00 [INF] Entity Framework Core 3.1.6 initialized 'IdentityCtx' using provider 'Microsoft.EntityFrameworkCore.InMemory' with options: StoreName=indetity.simple 
2020-08-23 18:29:26.022 +03:00 [DBG] 'IdentityCtx' generated a value for the 'Id' property of new 'SimpleMessageResult' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:29:26.050 +03:00 [DBG] Context 'IdentityCtx' started tracking 'SimpleMessageResult' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:29:26.057 +03:00 [DBG] SaveChanges starting for 'IdentityCtx'.
2020-08-23 18:29:26.059 +03:00 [DBG] DetectChanges starting for 'IdentityCtx'.
2020-08-23 18:29:26.071 +03:00 [DBG] DetectChanges completed for 'IdentityCtx'.
2020-08-23 18:29:26.101 +03:00 [INF] Saved 1 entities to in-memory store.
2020-08-23 18:29:26.109 +03:00 [DBG] An 'SimpleMessageResult' entity tracked by 'IdentityCtx' changed from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:29:26.114 +03:00 [DBG] SaveChanges completed for 'IdentityCtx' with 1 entities written to the database.
2020-08-23 18:29:36.399 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-08-23 18:29:36.405 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2020-08-23 18:29:36.407 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2020-08-23 18:29:36.408 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-08-23 18:29:36.411 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-08-23 18:29:36.412 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-08-23 18:29:36.413 +03:00 [INF] Executing ObjectResult, writing value of type 'Identity.Domain.Features.Auth.Commands.PwdAuthCmd'.
2020-08-23 18:29:36.426 +03:00 [INF] Executed action Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple) in 26887.4416ms
2020-08-23 18:29:36.430 +03:00 [INF] Executed endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:29:36.433 +03:00 [INF] HTTP POST /api/Auth responded 200 in 27126.0992 ms
2020-08-23 18:29:36.443 +03:00 [DBG] 'IdentityCtx' disposed.
2020-08-23 18:29:36.446 +03:00 [INF] Request finished in 27155.4117ms 200 application/json; charset=utf-8
2020-08-23 18:29:47.793 +03:00 [INF] Request starting HTTP/2 POST https://localhost:8001/api/Auth application/json 38
2020-08-23 18:29:47.795 +03:00 [DBG] Connection id "0HM27F53PVKFJ", Request id "0HM27F53PVKFJ:00000003": started reading request body.
2020-08-23 18:29:47.800 +03:00 [DBG] Connection id "0HM27F53PVKFJ", Request id "0HM27F53PVKFJ:00000003": done reading request body.
2020-08-23 18:29:47.808 +03:00 [DBG] The request has an origin header: 'https://localhost:8001'.
2020-08-23 18:29:47.810 +03:00 [INF] CORS policy execution failed.
2020-08-23 18:29:47.812 +03:00 [INF] Request origin https://localhost:8001 does not have permission to access the resource.
2020-08-23 18:29:47.814 +03:00 [DBG] POST requests are not supported
2020-08-23 18:29:47.818 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth'
2020-08-23 18:29:47.819 +03:00 [DBG] Endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)' with route pattern 'api/Auth' is valid for the request path '/api/Auth'
2020-08-23 18:29:47.823 +03:00 [DBG] Request matched endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:29:47.825 +03:00 [INF] Executing endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:29:47.828 +03:00 [INF] Route matched with {action = "ByPwd", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] ByPwd(Identity.Simple.Models.PwdAuthRequest) on controller Identity.Simple.Controllers.AuthController (Identity.Simple).
2020-08-23 18:29:47.831 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-08-23 18:29:47.836 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-08-23 18:29:47.838 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-08-23 18:29:47.841 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-08-23 18:29:47.844 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-08-23 18:29:47.846 +03:00 [DBG] Executing controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 18:29:47.849 +03:00 [DBG] Executed controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 18:29:47.851 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 18:29:47.857 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' using the name '' in request data ...
2020-08-23 18:29:47.859 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2020-08-23 18:29:47.863 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Identity.Simple.Models.PwdAuthRequest'
2020-08-23 18:29:47.865 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:29:47.867 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:29:47.869 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 18:29:47.873 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:30:35.213 +03:00 [INF] Entity Framework Core 3.1.6 initialized 'IdentityCtx' using provider 'Microsoft.EntityFrameworkCore.InMemory' with options: StoreName=indetity.simple 
2020-08-23 18:30:35.218 +03:00 [DBG] 'IdentityCtx' generated a value for the 'Id' property of new 'SimpleMessageResult' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:30:35.222 +03:00 [DBG] Context 'IdentityCtx' started tracking 'SimpleMessageResult' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:30:35.224 +03:00 [DBG] SaveChanges starting for 'IdentityCtx'.
2020-08-23 18:30:35.226 +03:00 [DBG] DetectChanges starting for 'IdentityCtx'.
2020-08-23 18:30:35.227 +03:00 [DBG] DetectChanges completed for 'IdentityCtx'.
2020-08-23 18:30:35.228 +03:00 [INF] Saved 1 entities to in-memory store.
2020-08-23 18:30:35.229 +03:00 [DBG] An 'SimpleMessageResult' entity tracked by 'IdentityCtx' changed from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:30:35.232 +03:00 [DBG] SaveChanges completed for 'IdentityCtx' with 1 entities written to the database.
2020-08-23 18:30:35.234 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-08-23 18:30:35.239 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2020-08-23 18:30:35.240 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2020-08-23 18:30:35.242 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-08-23 18:30:35.243 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-08-23 18:30:35.244 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-08-23 18:30:35.245 +03:00 [INF] Executing ObjectResult, writing value of type 'Identity.Domain.Features.Auth.Commands.PwdAuthCmd'.
2020-08-23 18:30:35.246 +03:00 [INF] Executed action Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple) in 47400.656ms
2020-08-23 18:30:35.249 +03:00 [INF] Executed endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:30:35.251 +03:00 [INF] HTTP POST /api/Auth responded 200 in 47455.644 ms
2020-08-23 18:30:35.253 +03:00 [DBG] 'IdentityCtx' disposed.
2020-08-23 18:30:35.255 +03:00 [INF] Request finished in 47461.8297ms 200 application/json; charset=utf-8
2020-08-23 18:31:00.910 +03:00 [INF] Request starting HTTP/2 POST https://localhost:8001/api/Auth application/json 38
2020-08-23 18:31:00.912 +03:00 [DBG] Connection id "0HM27F53PVKFJ", Request id "0HM27F53PVKFJ:00000005": started reading request body.
2020-08-23 18:31:00.914 +03:00 [DBG] Connection id "0HM27F53PVKFJ", Request id "0HM27F53PVKFJ:00000005": done reading request body.
2020-08-23 18:31:00.916 +03:00 [DBG] The request has an origin header: 'https://localhost:8001'.
2020-08-23 18:31:00.918 +03:00 [INF] CORS policy execution failed.
2020-08-23 18:31:00.920 +03:00 [INF] Request origin https://localhost:8001 does not have permission to access the resource.
2020-08-23 18:31:00.922 +03:00 [DBG] POST requests are not supported
2020-08-23 18:31:00.924 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth'
2020-08-23 18:31:00.931 +03:00 [DBG] Endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)' with route pattern 'api/Auth' is valid for the request path '/api/Auth'
2020-08-23 18:31:00.934 +03:00 [DBG] Request matched endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:31:00.936 +03:00 [INF] Executing endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:31:00.938 +03:00 [INF] Route matched with {action = "ByPwd", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] ByPwd(Identity.Simple.Models.PwdAuthRequest) on controller Identity.Simple.Controllers.AuthController (Identity.Simple).
2020-08-23 18:31:00.942 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-08-23 18:31:00.944 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-08-23 18:31:00.947 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-08-23 18:31:00.952 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-08-23 18:31:00.955 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-08-23 18:31:00.958 +03:00 [DBG] Executing controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 18:31:00.964 +03:00 [DBG] Executed controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 18:31:00.966 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 18:31:00.968 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' using the name '' in request data ...
2020-08-23 18:31:00.970 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2020-08-23 18:31:00.972 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Identity.Simple.Models.PwdAuthRequest'
2020-08-23 18:31:00.973 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:31:00.974 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:31:00.975 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 18:31:00.977 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:31:03.072 +03:00 [INF] Entity Framework Core 3.1.6 initialized 'IdentityCtx' using provider 'Microsoft.EntityFrameworkCore.InMemory' with options: StoreName=indetity.simple 
2020-08-23 18:31:03.078 +03:00 [DBG] 'IdentityCtx' generated a value for the 'Id' property of new 'SimpleMessageResult' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:31:03.080 +03:00 [DBG] Context 'IdentityCtx' started tracking 'SimpleMessageResult' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:31:03.081 +03:00 [DBG] SaveChanges starting for 'IdentityCtx'.
2020-08-23 18:31:03.085 +03:00 [DBG] DetectChanges starting for 'IdentityCtx'.
2020-08-23 18:31:03.087 +03:00 [DBG] DetectChanges completed for 'IdentityCtx'.
2020-08-23 18:31:03.088 +03:00 [INF] Saved 1 entities to in-memory store.
2020-08-23 18:31:03.089 +03:00 [DBG] An 'SimpleMessageResult' entity tracked by 'IdentityCtx' changed from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:31:03.092 +03:00 [DBG] SaveChanges completed for 'IdentityCtx' with 1 entities written to the database.
2020-08-23 18:31:48.121 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-08-23 18:31:48.124 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2020-08-23 18:31:48.126 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2020-08-23 18:31:48.127 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-08-23 18:31:48.128 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-08-23 18:31:48.129 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-08-23 18:31:48.131 +03:00 [INF] Executing ObjectResult, writing value of type 'Identity.Domain.Features.Auth.Commands.PwdAuthCmd'.
2020-08-23 18:31:48.133 +03:00 [INF] Executed action Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple) in 47174.793ms
2020-08-23 18:31:48.135 +03:00 [INF] Executed endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:31:48.136 +03:00 [INF] HTTP POST /api/Auth responded 200 in 47223.9914 ms
2020-08-23 18:31:48.138 +03:00 [DBG] 'IdentityCtx' disposed.
2020-08-23 18:31:48.141 +03:00 [INF] Request finished in 47231.2682ms 200 application/json; charset=utf-8
2020-08-23 18:31:57.264 +03:00 [INF] Request starting HTTP/2 POST https://localhost:8001/api/Auth application/json 38
2020-08-23 18:31:57.265 +03:00 [DBG] Connection id "0HM27F53PVKFJ", Request id "0HM27F53PVKFJ:00000007": started reading request body.
2020-08-23 18:31:57.267 +03:00 [DBG] Connection id "0HM27F53PVKFJ", Request id "0HM27F53PVKFJ:00000007": done reading request body.
2020-08-23 18:31:57.269 +03:00 [DBG] The request has an origin header: 'https://localhost:8001'.
2020-08-23 18:31:57.270 +03:00 [INF] CORS policy execution failed.
2020-08-23 18:31:57.271 +03:00 [INF] Request origin https://localhost:8001 does not have permission to access the resource.
2020-08-23 18:31:57.274 +03:00 [DBG] POST requests are not supported
2020-08-23 18:31:57.276 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth'
2020-08-23 18:31:57.278 +03:00 [DBG] Endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)' with route pattern 'api/Auth' is valid for the request path '/api/Auth'
2020-08-23 18:31:57.280 +03:00 [DBG] Request matched endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:31:57.281 +03:00 [INF] Executing endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:31:57.283 +03:00 [INF] Route matched with {action = "ByPwd", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] ByPwd(Identity.Simple.Models.PwdAuthRequest) on controller Identity.Simple.Controllers.AuthController (Identity.Simple).
2020-08-23 18:31:57.287 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-08-23 18:31:57.289 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-08-23 18:31:57.291 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-08-23 18:31:57.294 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-08-23 18:31:57.295 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-08-23 18:31:57.297 +03:00 [DBG] Executing controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 18:31:57.300 +03:00 [DBG] Executed controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 18:31:57.302 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 18:31:57.306 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' using the name '' in request data ...
2020-08-23 18:31:57.307 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2020-08-23 18:31:57.309 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Identity.Simple.Models.PwdAuthRequest'
2020-08-23 18:31:57.310 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:31:57.311 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:31:57.312 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 18:31:57.315 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:31:57.318 +03:00 [INF] Entity Framework Core 3.1.6 initialized 'IdentityCtx' using provider 'Microsoft.EntityFrameworkCore.InMemory' with options: StoreName=indetity.simple 
2020-08-23 18:31:57.320 +03:00 [DBG] 'IdentityCtx' generated a value for the 'Id' property of new 'SimpleMessageResult' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:31:57.322 +03:00 [DBG] Context 'IdentityCtx' started tracking 'SimpleMessageResult' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:31:57.323 +03:00 [DBG] SaveChanges starting for 'IdentityCtx'.
2020-08-23 18:31:57.325 +03:00 [DBG] DetectChanges starting for 'IdentityCtx'.
2020-08-23 18:31:57.329 +03:00 [DBG] DetectChanges completed for 'IdentityCtx'.
2020-08-23 18:31:57.331 +03:00 [INF] Saved 1 entities to in-memory store.
2020-08-23 18:31:57.332 +03:00 [DBG] An 'SimpleMessageResult' entity tracked by 'IdentityCtx' changed from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:31:57.337 +03:00 [DBG] SaveChanges completed for 'IdentityCtx' with 1 entities written to the database.
2020-08-23 18:32:16.515 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-08-23 18:32:16.519 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2020-08-23 18:32:16.521 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2020-08-23 18:32:16.522 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-08-23 18:32:16.523 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-08-23 18:32:16.525 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-08-23 18:32:16.526 +03:00 [INF] Executing ObjectResult, writing value of type 'Identity.Domain.Features.Auth.Commands.PwdAuthCmd'.
2020-08-23 18:32:16.527 +03:00 [INF] Executed action Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple) in 19230.6155ms
2020-08-23 18:32:16.529 +03:00 [INF] Executed endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:32:16.531 +03:00 [INF] HTTP POST /api/Auth responded 200 in 19265.7577 ms
2020-08-23 18:32:16.533 +03:00 [DBG] 'IdentityCtx' disposed.
2020-08-23 18:32:16.537 +03:00 [INF] Request finished in 19272.8984ms 200 application/json; charset=utf-8
2020-08-23 18:32:26.460 +03:00 [INF] Request starting HTTP/2 POST https://localhost:8001/api/Auth application/json 38
2020-08-23 18:32:26.462 +03:00 [DBG] Connection id "0HM27F53PVKFJ", Request id "0HM27F53PVKFJ:00000009": started reading request body.
2020-08-23 18:32:26.464 +03:00 [DBG] Connection id "0HM27F53PVKFJ", Request id "0HM27F53PVKFJ:00000009": done reading request body.
2020-08-23 18:32:26.466 +03:00 [DBG] The request has an origin header: 'https://localhost:8001'.
2020-08-23 18:32:26.468 +03:00 [INF] CORS policy execution failed.
2020-08-23 18:32:26.469 +03:00 [INF] Request origin https://localhost:8001 does not have permission to access the resource.
2020-08-23 18:32:26.473 +03:00 [DBG] POST requests are not supported
2020-08-23 18:32:26.474 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth'
2020-08-23 18:32:26.476 +03:00 [DBG] Endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)' with route pattern 'api/Auth' is valid for the request path '/api/Auth'
2020-08-23 18:32:26.479 +03:00 [DBG] Request matched endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:32:26.483 +03:00 [INF] Executing endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:32:26.485 +03:00 [INF] Route matched with {action = "ByPwd", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] ByPwd(Identity.Simple.Models.PwdAuthRequest) on controller Identity.Simple.Controllers.AuthController (Identity.Simple).
2020-08-23 18:32:26.488 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-08-23 18:32:26.494 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-08-23 18:32:26.496 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-08-23 18:32:26.506 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-08-23 18:32:26.508 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-08-23 18:32:26.510 +03:00 [DBG] Executing controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 18:32:26.515 +03:00 [DBG] Executed controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 18:32:26.518 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 18:32:26.526 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' using the name '' in request data ...
2020-08-23 18:32:26.529 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2020-08-23 18:32:26.531 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Identity.Simple.Models.PwdAuthRequest'
2020-08-23 18:32:26.533 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:32:26.537 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:32:26.540 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 18:32:26.543 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:32:34.385 +03:00 [INF] Entity Framework Core 3.1.6 initialized 'IdentityCtx' using provider 'Microsoft.EntityFrameworkCore.InMemory' with options: StoreName=indetity.simple 
2020-08-23 18:32:34.388 +03:00 [DBG] 'IdentityCtx' generated a value for the 'Id' property of new 'SimpleMessageResult' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:32:34.390 +03:00 [DBG] Context 'IdentityCtx' started tracking 'SimpleMessageResult' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:32:34.392 +03:00 [DBG] SaveChanges starting for 'IdentityCtx'.
2020-08-23 18:32:34.394 +03:00 [DBG] DetectChanges starting for 'IdentityCtx'.
2020-08-23 18:32:34.396 +03:00 [DBG] DetectChanges completed for 'IdentityCtx'.
2020-08-23 18:32:34.397 +03:00 [INF] Saved 1 entities to in-memory store.
2020-08-23 18:32:34.399 +03:00 [DBG] An 'SimpleMessageResult' entity tracked by 'IdentityCtx' changed from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:32:34.401 +03:00 [DBG] SaveChanges completed for 'IdentityCtx' with 1 entities written to the database.
2020-08-23 18:45:05.735 +03:00 [DBG] Hosting starting
2020-08-23 18:45:05.859 +03:00 [INF] User profile is available. Using 'C:\Users\adwae\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-23 18:45:05.897 +03:00 [DBG] Reading data from file 'C:\Users\adwae\AppData\Local\ASP.NET\DataProtection-Keys\key-37a38d35-de78-4599-9855-bf9aa01642e4.xml'.
2020-08-23 18:45:05.926 +03:00 [DBG] Reading data from file 'C:\Users\adwae\AppData\Local\ASP.NET\DataProtection-Keys\key-59817979-158b-45ef-a6a2-f2360343a028.xml'.
2020-08-23 18:45:05.932 +03:00 [DBG] Found key "37a38d35-de78-4599-9855-bf9aa01642e4".
2020-08-23 18:45:05.940 +03:00 [DBG] Found key "59817979-158b-45ef-a6a2-f2360343a028".
2020-08-23 18:45:05.949 +03:00 [DBG] Considering key "59817979-158b-45ef-a6a2-f2360343a028" with expiration date "2020-10-04T17:37:43.3250722+00:00" as default key.
2020-08-23 18:45:05.982 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=3.1.3.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-08-23 18:45:05.986 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2020-08-23 18:45:05.989 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=3.1.3.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-08-23 18:45:05.994 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2020-08-23 18:45:06.002 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2020-08-23 18:45:06.008 +03:00 [DBG] Using key "59817979-158b-45ef-a6a2-f2360343a028" as the default key.
2020-08-23 18:45:06.009 +03:00 [DBG] Key ring with default key "59817979-158b-45ef-a6a2-f2360343a028" was loaded during application startup.
2020-08-23 18:45:06.339 +03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-08-23 18:45:06.434 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C321FB7814B4B11FA1E331D9EF01FA785796637D)
2020-08-23 18:45:06.480 +03:00 [INF] Now listening on: https://localhost:8001
2020-08-23 18:45:06.482 +03:00 [DBG] Loaded hosting startup assembly Identity.Simple
2020-08-23 18:45:06.484 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-08-23 18:45:06.485 +03:00 [INF] Hosting environment: Development
2020-08-23 18:45:06.487 +03:00 [INF] Content root path: E:\Projects\_mine\infrastructure\examples\identity\Identity.Simple
2020-08-23 18:45:06.489 +03:00 [DBG] Hosting started
2020-08-23 18:45:10.114 +03:00 [DBG] Connection id "0HM27FE26MKUC" accepted.
2020-08-23 18:45:10.117 +03:00 [DBG] Connection id "0HM27FE26MKUC" started.
2020-08-23 18:45:10.188 +03:00 [DBG] Connection id "0HM27FE26MKUC" received FIN.
2020-08-23 18:45:10.189 +03:00 [DBG] Connection id "0HM27FE26MKUD" accepted.
2020-08-23 18:45:10.195 +03:00 [DBG] Connection id "0HM27FE26MKUD" started.
2020-08-23 18:45:10.209 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): При обработке сертификата произошла неизвестная ошибка.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.StartSendAuthResetSignal(ProtocolToken message, AsyncProtocolRequest asyncRequest, ExceptionDispatchInfo exception)
   at System.Net.Security.SslStream.CheckCompletionBeforeNextReceive(ProtocolToken message, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessReceivedBlob(Byte[] buffer, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslStream.ThrowIfExceptional()
   at System.Net.Security.SslStream.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-08-23 18:45:10.263 +03:00 [DBG] Connection id "0HM27FE26MKUC" stopped.
2020-08-23 18:45:10.265 +03:00 [DBG] Connection id "0HM27FE26MKUC" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-08-23 18:45:10.302 +03:00 [INF] Request starting HTTP/2 POST https://localhost:8001/api/Auth application/json 38
2020-08-23 18:45:10.306 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-08-23 18:45:10.312 +03:00 [DBG] Connection id "0HM27FE26MKUD", Request id "0HM27FE26MKUD:00000001": started reading request body.
2020-08-23 18:45:10.314 +03:00 [DBG] Connection id "0HM27FE26MKUD", Request id "0HM27FE26MKUD:00000001": done reading request body.
2020-08-23 18:45:10.319 +03:00 [DBG] The request has an origin header: 'https://localhost:8001'.
2020-08-23 18:45:10.320 +03:00 [INF] CORS policy execution failed.
2020-08-23 18:45:10.322 +03:00 [INF] Request origin https://localhost:8001 does not have permission to access the resource.
2020-08-23 18:45:10.365 +03:00 [DBG] POST requests are not supported
2020-08-23 18:45:10.429 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth'
2020-08-23 18:45:10.434 +03:00 [DBG] Endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)' with route pattern 'api/Auth' is valid for the request path '/api/Auth'
2020-08-23 18:45:10.436 +03:00 [DBG] Request matched endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:45:10.438 +03:00 [INF] Executing endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:45:10.448 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-08-23 18:45:10.500 +03:00 [INF] Route matched with {action = "ByPwd", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] ByPwd(Identity.Simple.Models.PwdAuthRequest) on controller Identity.Simple.Controllers.AuthController (Identity.Simple).
2020-08-23 18:45:10.503 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-08-23 18:45:10.505 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-08-23 18:45:10.506 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-08-23 18:45:10.509 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-08-23 18:45:10.513 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-08-23 18:45:10.517 +03:00 [DBG] Executing controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 18:45:10.620 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2020-08-23 18:45:10.645 +03:00 [DBG] Executed controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 18:45:10.672 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 18:45:10.675 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' using the name '' in request data ...
2020-08-23 18:45:10.678 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2020-08-23 18:45:10.686 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Identity.Simple.Models.PwdAuthRequest'
2020-08-23 18:45:10.688 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:45:10.689 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:45:10.691 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 18:45:10.695 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:45:29.401 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2020-08-23 18:45:29.403 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2020-08-23 18:45:29.463 +03:00 [INF] Entity Framework Core 3.1.6 initialized 'IdentityCtx' using provider 'Microsoft.EntityFrameworkCore.InMemory' with options: StoreName=indetity.simple 
2020-08-23 18:45:29.649 +03:00 [DBG] queryContext => new QueryingEnumerable<User>(
    queryContext, 
    new ResultEnumerable(() => InMemoryShapedQueryCompilingExpressionVisitor.Table(
        queryContext: queryContext, 
        entityType: EntityType: User)
        .Where(valueBuffer => EntityMaterializerSource.TryReadValue<string>(valueBuffer, 9, Property: User.NormalizedEmail (string) Index MaxLength256) == InMemoryExpressionTranslatingExpressionVisitor.GetParameterValue<string>(
            queryContext: queryContext, 
            parameterName: "__normalizedEmail_0"))
        .SingleOrDefault())
        .Select(valueBuffer => new ValueBuffer(new object[]
        { 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 0, Property: User.Id (string) Required PK AfterSave:Throw), 
            (object)EntityMaterializerSource.TryReadValue<int>(valueBuffer, 1, Property: User.AccessFailedCount (int) Required), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 2, Property: User.Email (string) MaxLength256), 
            (object)EntityMaterializerSource.TryReadValue<bool>(valueBuffer, 3, Property: User.EmailConfirmed (bool) Required), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 4, Property: User.FacebookId (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 5, Property: User.GoogleId (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 6, Property: User.LinkedinId (string)), 
            (object)EntityMaterializerSource.TryReadValue<bool>(valueBuffer, 7, Property: User.LockoutEnabled (bool) Required), 
            (object)EntityMaterializerSource.TryReadValue<Nullable<DateTimeOffset>>(valueBuffer, 8, Property: User.LockoutEnd (Nullable<DateTimeOffset>)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 9, Property: User.NormalizedEmail (string) Index MaxLength256), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 10, Property: User.NormalizedUserName (string) Index MaxLength256), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 11, Property: User.PasswordHash (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 12, Property: User.PhoneNumber (string)), 
            (object)EntityMaterializerSource.TryReadValue<bool>(valueBuffer, 13, Property: User.PhoneNumberConfirmed (bool) Required), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 14, Property: User.Salt (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 15, Property: User.SecurityStamp (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 16, Property: User.UserName (string) MaxLength256) 
        })), 
    Func<QueryContext, ValueBuffer, User>, 
    Identity.Dal.IdentityCtx, 
    null
)
    .SingleOrDefault()
2020-08-23 18:45:58.713 +03:00 [INF] Entity Framework Core 3.1.6 initialized 'IdentityCtx' using provider 'Microsoft.EntityFrameworkCore.InMemory' with options: StoreName=indetity.simple 
2020-08-23 18:45:58.750 +03:00 [DBG] 'IdentityCtx' generated a value for the 'Id' property of new 'SimpleMessageResult' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:45:58.783 +03:00 [DBG] Context 'IdentityCtx' started tracking 'SimpleMessageResult' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:45:58.788 +03:00 [DBG] SaveChanges starting for 'IdentityCtx'.
2020-08-23 18:45:58.792 +03:00 [DBG] DetectChanges starting for 'IdentityCtx'.
2020-08-23 18:45:58.803 +03:00 [DBG] DetectChanges completed for 'IdentityCtx'.
2020-08-23 18:45:58.819 +03:00 [INF] Saved 1 entities to in-memory store.
2020-08-23 18:45:58.826 +03:00 [DBG] An 'SimpleMessageResult' entity tracked by 'IdentityCtx' changed from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:45:58.833 +03:00 [DBG] SaveChanges completed for 'IdentityCtx' with 1 entities written to the database.
2020-08-23 18:46:01.395 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-08-23 18:46:01.408 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2020-08-23 18:46:01.412 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2020-08-23 18:46:01.415 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-08-23 18:46:01.417 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-08-23 18:46:01.419 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-08-23 18:46:01.421 +03:00 [INF] Executing ObjectResult, writing value of type 'Identity.Domain.Features.Auth.Commands.PwdAuthCmd'.
2020-08-23 18:46:01.443 +03:00 [INF] Executed action Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple) in 50921.7854ms
2020-08-23 18:46:01.447 +03:00 [INF] Executed endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:46:01.452 +03:00 [INF] HTTP POST /api/Auth responded 200 in 51141.0875 ms
2020-08-23 18:46:01.458 +03:00 [DBG] 'IdentityCtx' disposed.
2020-08-23 18:46:01.461 +03:00 [INF] Request finished in 51160.3549ms 200 application/json; charset=utf-8
2020-08-23 18:46:04.248 +03:00 [INF] Request starting HTTP/2 POST https://localhost:8001/api/Auth application/json 38
2020-08-23 18:46:04.251 +03:00 [DBG] Connection id "0HM27FE26MKUD", Request id "0HM27FE26MKUD:00000003": started reading request body.
2020-08-23 18:46:04.253 +03:00 [DBG] Connection id "0HM27FE26MKUD", Request id "0HM27FE26MKUD:00000003": done reading request body.
2020-08-23 18:46:04.258 +03:00 [DBG] The request has an origin header: 'https://localhost:8001'.
2020-08-23 18:46:04.260 +03:00 [INF] CORS policy execution failed.
2020-08-23 18:46:04.261 +03:00 [INF] Request origin https://localhost:8001 does not have permission to access the resource.
2020-08-23 18:46:04.263 +03:00 [DBG] POST requests are not supported
2020-08-23 18:46:04.272 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth'
2020-08-23 18:46:04.274 +03:00 [DBG] Endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)' with route pattern 'api/Auth' is valid for the request path '/api/Auth'
2020-08-23 18:46:04.276 +03:00 [DBG] Request matched endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:46:04.277 +03:00 [INF] Executing endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:46:04.279 +03:00 [INF] Route matched with {action = "ByPwd", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] ByPwd(Identity.Simple.Models.PwdAuthRequest) on controller Identity.Simple.Controllers.AuthController (Identity.Simple).
2020-08-23 18:46:04.284 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-08-23 18:46:04.287 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-08-23 18:46:04.288 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-08-23 18:46:04.290 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-08-23 18:46:04.292 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-08-23 18:46:04.294 +03:00 [DBG] Executing controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 18:46:04.298 +03:00 [DBG] Executed controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 18:46:04.300 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 18:46:04.302 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' using the name '' in request data ...
2020-08-23 18:46:04.304 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2020-08-23 18:46:04.306 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Identity.Simple.Models.PwdAuthRequest'
2020-08-23 18:46:04.307 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:46:04.308 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:46:04.310 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 18:46:04.311 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:47:06.264 +03:00 [INF] Request starting HTTP/2 POST https://localhost:8001/api/Auth application/json 38
2020-08-23 18:47:06.266 +03:00 [DBG] Connection id "0HM27FE26MKUD", Request id "0HM27FE26MKUD:00000005": started reading request body.
2020-08-23 18:47:06.268 +03:00 [INF] Entity Framework Core 3.1.6 initialized 'IdentityCtx' using provider 'Microsoft.EntityFrameworkCore.InMemory' with options: StoreName=indetity.simple 
2020-08-23 18:47:06.270 +03:00 [DBG] Connection id "0HM27FE26MKUD", Request id "0HM27FE26MKUD:00000005": done reading request body.
2020-08-23 18:47:06.272 +03:00 [DBG] 'IdentityCtx' generated a value for the 'Id' property of new 'SimpleMessageResult' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:47:06.274 +03:00 [DBG] The request has an origin header: 'https://localhost:8001'.
2020-08-23 18:47:06.278 +03:00 [DBG] Context 'IdentityCtx' started tracking 'SimpleMessageResult' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:47:06.278 +03:00 [INF] CORS policy execution failed.
2020-08-23 18:47:06.280 +03:00 [DBG] SaveChanges starting for 'IdentityCtx'.
2020-08-23 18:47:06.281 +03:00 [INF] Request origin https://localhost:8001 does not have permission to access the resource.
2020-08-23 18:47:06.282 +03:00 [DBG] DetectChanges starting for 'IdentityCtx'.
2020-08-23 18:47:06.285 +03:00 [DBG] POST requests are not supported
2020-08-23 18:47:06.286 +03:00 [DBG] DetectChanges completed for 'IdentityCtx'.
2020-08-23 18:47:06.288 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth'
2020-08-23 18:47:06.290 +03:00 [INF] Saved 1 entities to in-memory store.
2020-08-23 18:47:06.292 +03:00 [DBG] Endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)' with route pattern 'api/Auth' is valid for the request path '/api/Auth'
2020-08-23 18:47:06.295 +03:00 [DBG] An 'SimpleMessageResult' entity tracked by 'IdentityCtx' changed from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:47:06.297 +03:00 [DBG] Request matched endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:47:06.301 +03:00 [DBG] SaveChanges completed for 'IdentityCtx' with 1 entities written to the database.
2020-08-23 18:47:06.304 +03:00 [INF] Executing endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:47:07.727 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-08-23 18:47:07.729 +03:00 [INF] Route matched with {action = "ByPwd", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] ByPwd(Identity.Simple.Models.PwdAuthRequest) on controller Identity.Simple.Controllers.AuthController (Identity.Simple).
2020-08-23 18:47:07.734 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2020-08-23 18:47:07.738 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-08-23 18:47:07.740 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2020-08-23 18:47:07.742 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-08-23 18:47:07.745 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-08-23 18:47:07.747 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-08-23 18:47:07.749 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-08-23 18:47:07.753 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-08-23 18:47:07.762 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-08-23 18:47:07.763 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-08-23 18:47:07.765 +03:00 [INF] Executing ObjectResult, writing value of type 'Identity.Domain.Features.Auth.Commands.PwdAuthCmd'.
2020-08-23 18:47:07.766 +03:00 [DBG] Executing controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 18:47:07.768 +03:00 [INF] Executed action Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple) in 63474.3676ms
2020-08-23 18:47:07.772 +03:00 [INF] Executed endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:47:07.772 +03:00 [DBG] Executed controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 18:47:07.773 +03:00 [INF] HTTP POST /api/Auth responded 200 in 63522.769 ms
2020-08-23 18:47:07.775 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 18:47:07.784 +03:00 [DBG] 'IdentityCtx' disposed.
2020-08-23 18:47:07.787 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' using the name '' in request data ...
2020-08-23 18:47:07.789 +03:00 [INF] Request finished in 63541.9975ms 200 application/json; charset=utf-8
2020-08-23 18:47:07.791 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2020-08-23 18:47:07.797 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Identity.Simple.Models.PwdAuthRequest'
2020-08-23 18:47:07.799 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:47:07.802 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:47:07.804 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 18:47:07.806 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:47:43.373 +03:00 [DBG] Hosting starting
2020-08-23 18:47:43.478 +03:00 [INF] User profile is available. Using 'C:\Users\adwae\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-23 18:47:43.526 +03:00 [DBG] Reading data from file 'C:\Users\adwae\AppData\Local\ASP.NET\DataProtection-Keys\key-37a38d35-de78-4599-9855-bf9aa01642e4.xml'.
2020-08-23 18:47:43.559 +03:00 [DBG] Reading data from file 'C:\Users\adwae\AppData\Local\ASP.NET\DataProtection-Keys\key-59817979-158b-45ef-a6a2-f2360343a028.xml'.
2020-08-23 18:47:43.573 +03:00 [DBG] Found key "37a38d35-de78-4599-9855-bf9aa01642e4".
2020-08-23 18:47:43.587 +03:00 [DBG] Found key "59817979-158b-45ef-a6a2-f2360343a028".
2020-08-23 18:47:43.600 +03:00 [DBG] Considering key "59817979-158b-45ef-a6a2-f2360343a028" with expiration date "2020-10-04T17:37:43.3250722+00:00" as default key.
2020-08-23 18:47:43.642 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=3.1.3.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-08-23 18:47:43.648 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2020-08-23 18:47:43.651 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=3.1.3.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-08-23 18:47:43.657 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2020-08-23 18:47:43.663 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2020-08-23 18:47:43.671 +03:00 [DBG] Using key "59817979-158b-45ef-a6a2-f2360343a028" as the default key.
2020-08-23 18:47:43.673 +03:00 [DBG] Key ring with default key "59817979-158b-45ef-a6a2-f2360343a028" was loaded during application startup.
2020-08-23 18:47:44.041 +03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-08-23 18:47:44.149 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C321FB7814B4B11FA1E331D9EF01FA785796637D)
2020-08-23 18:47:44.215 +03:00 [INF] Now listening on: https://localhost:8001
2020-08-23 18:47:44.217 +03:00 [DBG] Loaded hosting startup assembly Identity.Simple
2020-08-23 18:47:44.219 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-08-23 18:47:44.220 +03:00 [INF] Hosting environment: Development
2020-08-23 18:47:44.222 +03:00 [INF] Content root path: E:\Projects\_mine\infrastructure\examples\identity\Identity.Simple
2020-08-23 18:47:44.225 +03:00 [DBG] Hosting started
2020-08-23 18:47:48.428 +03:00 [DBG] Connection id "0HM27FFHCF9T1" accepted.
2020-08-23 18:47:48.465 +03:00 [DBG] Connection id "0HM27FFHCF9T1" started.
2020-08-23 18:47:48.584 +03:00 [DBG] Connection id "0HM27FFHCF9T2" accepted.
2020-08-23 18:47:48.584 +03:00 [DBG] Connection id "0HM27FFHCF9T1" received FIN.
2020-08-23 18:47:48.586 +03:00 [DBG] Connection id "0HM27FFHCF9T2" started.
2020-08-23 18:47:48.607 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): При обработке сертификата произошла неизвестная ошибка.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.StartSendAuthResetSignal(ProtocolToken message, AsyncProtocolRequest asyncRequest, ExceptionDispatchInfo exception)
   at System.Net.Security.SslStream.CheckCompletionBeforeNextReceive(ProtocolToken message, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessReceivedBlob(Byte[] buffer, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslStream.ThrowIfExceptional()
   at System.Net.Security.SslStream.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-08-23 18:47:48.695 +03:00 [DBG] Connection id "0HM27FFHCF9T1" stopped.
2020-08-23 18:47:48.699 +03:00 [DBG] Connection id "0HM27FFHCF9T1" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-08-23 18:47:48.721 +03:00 [INF] Request starting HTTP/2 POST https://localhost:8001/api/Auth application/json 38
2020-08-23 18:47:48.729 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-08-23 18:47:48.742 +03:00 [DBG] Connection id "0HM27FFHCF9T2", Request id "0HM27FFHCF9T2:00000001": started reading request body.
2020-08-23 18:47:48.746 +03:00 [DBG] Connection id "0HM27FFHCF9T2", Request id "0HM27FFHCF9T2:00000001": done reading request body.
2020-08-23 18:47:48.757 +03:00 [DBG] The request has an origin header: 'https://localhost:8001'.
2020-08-23 18:47:48.759 +03:00 [INF] CORS policy execution failed.
2020-08-23 18:47:48.761 +03:00 [INF] Request origin https://localhost:8001 does not have permission to access the resource.
2020-08-23 18:47:48.825 +03:00 [DBG] POST requests are not supported
2020-08-23 18:47:48.853 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth'
2020-08-23 18:47:48.859 +03:00 [DBG] Endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)' with route pattern 'api/Auth' is valid for the request path '/api/Auth'
2020-08-23 18:47:48.863 +03:00 [DBG] Request matched endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:47:48.865 +03:00 [INF] Executing endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:47:48.879 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-08-23 18:47:48.958 +03:00 [INF] Route matched with {action = "ByPwd", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] ByPwd(Identity.Simple.Models.PwdAuthRequest) on controller Identity.Simple.Controllers.AuthController (Identity.Simple).
2020-08-23 18:47:48.962 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-08-23 18:47:48.966 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-08-23 18:47:48.972 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-08-23 18:47:48.975 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-08-23 18:47:48.977 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-08-23 18:47:48.982 +03:00 [DBG] Executing controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 18:47:49.107 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2020-08-23 18:47:49.129 +03:00 [DBG] Executed controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 18:47:49.149 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 18:47:49.158 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' using the name '' in request data ...
2020-08-23 18:47:49.171 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2020-08-23 18:47:49.194 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Identity.Simple.Models.PwdAuthRequest'
2020-08-23 18:47:49.198 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:47:49.200 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:47:49.204 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 18:47:49.214 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:48:05.403 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2020-08-23 18:48:05.406 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2020-08-23 18:48:05.454 +03:00 [INF] Entity Framework Core 3.1.6 initialized 'IdentityCtx' using provider 'Microsoft.EntityFrameworkCore.InMemory' with options: StoreName=indetity.simple 
2020-08-23 18:48:05.677 +03:00 [DBG] queryContext => new QueryingEnumerable<User>(
    queryContext, 
    new ResultEnumerable(() => InMemoryShapedQueryCompilingExpressionVisitor.Table(
        queryContext: queryContext, 
        entityType: EntityType: User)
        .Where(valueBuffer => EntityMaterializerSource.TryReadValue<string>(valueBuffer, 9, Property: User.NormalizedEmail (string) Index MaxLength256) == InMemoryExpressionTranslatingExpressionVisitor.GetParameterValue<string>(
            queryContext: queryContext, 
            parameterName: "__normalizedEmail_0"))
        .SingleOrDefault())
        .Select(valueBuffer => new ValueBuffer(new object[]
        { 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 0, Property: User.Id (string) Required PK AfterSave:Throw), 
            (object)EntityMaterializerSource.TryReadValue<int>(valueBuffer, 1, Property: User.AccessFailedCount (int) Required), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 2, Property: User.Email (string) MaxLength256), 
            (object)EntityMaterializerSource.TryReadValue<bool>(valueBuffer, 3, Property: User.EmailConfirmed (bool) Required), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 4, Property: User.FacebookId (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 5, Property: User.GoogleId (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 6, Property: User.LinkedinId (string)), 
            (object)EntityMaterializerSource.TryReadValue<bool>(valueBuffer, 7, Property: User.LockoutEnabled (bool) Required), 
            (object)EntityMaterializerSource.TryReadValue<Nullable<DateTimeOffset>>(valueBuffer, 8, Property: User.LockoutEnd (Nullable<DateTimeOffset>)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 9, Property: User.NormalizedEmail (string) Index MaxLength256), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 10, Property: User.NormalizedUserName (string) Index MaxLength256), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 11, Property: User.PasswordHash (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 12, Property: User.PhoneNumber (string)), 
            (object)EntityMaterializerSource.TryReadValue<bool>(valueBuffer, 13, Property: User.PhoneNumberConfirmed (bool) Required), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 14, Property: User.Salt (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 15, Property: User.SecurityStamp (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 16, Property: User.UserName (string) MaxLength256) 
        })), 
    Func<QueryContext, ValueBuffer, User>, 
    Identity.Dal.IdentityCtx, 
    null
)
    .SingleOrDefault()
2020-08-23 18:48:14.725 +03:00 [INF] Entity Framework Core 3.1.6 initialized 'IdentityCtx' using provider 'Microsoft.EntityFrameworkCore.InMemory' with options: StoreName=indetity.simple 
2020-08-23 18:48:14.772 +03:00 [DBG] 'IdentityCtx' generated a value for the 'Id' property of new 'SimpleMessageResult' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:48:14.810 +03:00 [DBG] Context 'IdentityCtx' started tracking 'SimpleMessageResult' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:48:14.816 +03:00 [DBG] SaveChanges starting for 'IdentityCtx'.
2020-08-23 18:48:14.820 +03:00 [DBG] DetectChanges starting for 'IdentityCtx'.
2020-08-23 18:48:14.838 +03:00 [DBG] DetectChanges completed for 'IdentityCtx'.
2020-08-23 18:48:14.857 +03:00 [INF] Saved 1 entities to in-memory store.
2020-08-23 18:48:14.867 +03:00 [DBG] An 'SimpleMessageResult' entity tracked by 'IdentityCtx' changed from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:48:14.875 +03:00 [DBG] SaveChanges completed for 'IdentityCtx' with 1 entities written to the database.
2020-08-23 18:48:16.568 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-08-23 18:48:16.576 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2020-08-23 18:48:16.579 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2020-08-23 18:48:16.581 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-08-23 18:48:16.582 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-08-23 18:48:16.583 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-08-23 18:48:16.585 +03:00 [INF] Executing ObjectResult, writing value of type 'Identity.Domain.Features.Auth.Commands.PwdAuthCmd'.
2020-08-23 18:48:16.613 +03:00 [INF] Executed action Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple) in 27625.0851ms
2020-08-23 18:48:16.616 +03:00 [INF] Executed endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:48:16.619 +03:00 [INF] HTTP POST /api/Auth responded 200 in 27883.4304 ms
2020-08-23 18:48:16.625 +03:00 [DBG] 'IdentityCtx' disposed.
2020-08-23 18:48:16.628 +03:00 [INF] Request finished in 27912.6541ms 200 application/json; charset=utf-8
2020-08-23 18:49:05.628 +03:00 [INF] Request starting HTTP/2 POST https://localhost:8001/api/Auth application/json 38
2020-08-23 18:49:05.630 +03:00 [DBG] Connection id "0HM27FFHCF9T2", Request id "0HM27FFHCF9T2:00000003": started reading request body.
2020-08-23 18:49:05.632 +03:00 [DBG] Connection id "0HM27FFHCF9T2", Request id "0HM27FFHCF9T2:00000003": done reading request body.
2020-08-23 18:49:05.640 +03:00 [DBG] The request has an origin header: 'https://localhost:8001'.
2020-08-23 18:49:05.643 +03:00 [INF] CORS policy execution failed.
2020-08-23 18:49:05.644 +03:00 [INF] Request origin https://localhost:8001 does not have permission to access the resource.
2020-08-23 18:49:05.646 +03:00 [DBG] POST requests are not supported
2020-08-23 18:49:05.651 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth'
2020-08-23 18:49:05.653 +03:00 [DBG] Endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)' with route pattern 'api/Auth' is valid for the request path '/api/Auth'
2020-08-23 18:49:05.661 +03:00 [DBG] Request matched endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:49:05.664 +03:00 [INF] Executing endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:49:05.671 +03:00 [INF] Route matched with {action = "ByPwd", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] ByPwd(Identity.Simple.Models.PwdAuthRequest) on controller Identity.Simple.Controllers.AuthController (Identity.Simple).
2020-08-23 18:49:05.674 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-08-23 18:49:05.677 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-08-23 18:49:05.681 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-08-23 18:49:05.685 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-08-23 18:49:05.692 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-08-23 18:49:05.695 +03:00 [DBG] Executing controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 18:49:05.697 +03:00 [DBG] Executed controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 18:49:05.702 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 18:49:05.704 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' using the name '' in request data ...
2020-08-23 18:49:05.706 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2020-08-23 18:49:05.708 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Identity.Simple.Models.PwdAuthRequest'
2020-08-23 18:49:05.709 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:49:05.711 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:49:05.714 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 18:49:05.716 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:52:09.640 +03:00 [DBG] Hosting starting
2020-08-23 18:52:09.758 +03:00 [INF] User profile is available. Using 'C:\Users\adwae\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-23 18:52:09.791 +03:00 [DBG] Reading data from file 'C:\Users\adwae\AppData\Local\ASP.NET\DataProtection-Keys\key-37a38d35-de78-4599-9855-bf9aa01642e4.xml'.
2020-08-23 18:52:09.822 +03:00 [DBG] Reading data from file 'C:\Users\adwae\AppData\Local\ASP.NET\DataProtection-Keys\key-59817979-158b-45ef-a6a2-f2360343a028.xml'.
2020-08-23 18:52:09.830 +03:00 [DBG] Found key "37a38d35-de78-4599-9855-bf9aa01642e4".
2020-08-23 18:52:09.847 +03:00 [DBG] Found key "59817979-158b-45ef-a6a2-f2360343a028".
2020-08-23 18:52:09.856 +03:00 [DBG] Considering key "59817979-158b-45ef-a6a2-f2360343a028" with expiration date "2020-10-04T17:37:43.3250722+00:00" as default key.
2020-08-23 18:52:09.891 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=3.1.3.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-08-23 18:52:09.896 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2020-08-23 18:52:09.899 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=3.1.3.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-08-23 18:52:09.914 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2020-08-23 18:52:09.919 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2020-08-23 18:52:09.923 +03:00 [DBG] Using key "59817979-158b-45ef-a6a2-f2360343a028" as the default key.
2020-08-23 18:52:09.925 +03:00 [DBG] Key ring with default key "59817979-158b-45ef-a6a2-f2360343a028" was loaded during application startup.
2020-08-23 18:52:10.238 +03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-08-23 18:52:10.316 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C321FB7814B4B11FA1E331D9EF01FA785796637D)
2020-08-23 18:52:10.369 +03:00 [INF] Now listening on: https://localhost:8001
2020-08-23 18:52:10.371 +03:00 [DBG] Loaded hosting startup assembly Identity.Simple
2020-08-23 18:52:10.374 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-08-23 18:52:10.375 +03:00 [INF] Hosting environment: Development
2020-08-23 18:52:10.377 +03:00 [INF] Content root path: E:\Projects\_mine\infrastructure\examples\identity\Identity.Simple
2020-08-23 18:52:10.382 +03:00 [DBG] Hosting started
2020-08-23 18:52:12.279 +03:00 [DBG] Connection id "0HM27FI00P9UK" accepted.
2020-08-23 18:52:12.281 +03:00 [DBG] Connection id "0HM27FI00P9UK" started.
2020-08-23 18:52:12.422 +03:00 [DBG] Connection id "0HM27FI00P9UL" accepted.
2020-08-23 18:52:12.456 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): При обработке сертификата произошла неизвестная ошибка.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.StartSendAuthResetSignal(ProtocolToken message, AsyncProtocolRequest asyncRequest, ExceptionDispatchInfo exception)
   at System.Net.Security.SslStream.CheckCompletionBeforeNextReceive(ProtocolToken message, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessReceivedBlob(Byte[] buffer, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslStream.ThrowIfExceptional()
   at System.Net.Security.SslStream.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-08-23 18:52:12.423 +03:00 [DBG] Connection id "0HM27FI00P9UK" received FIN.
2020-08-23 18:52:12.465 +03:00 [DBG] Connection id "0HM27FI00P9UL" started.
2020-08-23 18:52:12.590 +03:00 [DBG] Connection id "0HM27FI00P9UK" stopped.
2020-08-23 18:52:12.594 +03:00 [DBG] Connection id "0HM27FI00P9UK" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-08-23 18:52:12.658 +03:00 [INF] Request starting HTTP/2 POST https://localhost:8001/api/Auth application/json 38
2020-08-23 18:52:12.661 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-08-23 18:52:12.669 +03:00 [DBG] Connection id "0HM27FI00P9UL", Request id "0HM27FI00P9UL:00000001": started reading request body.
2020-08-23 18:52:12.672 +03:00 [DBG] Connection id "0HM27FI00P9UL", Request id "0HM27FI00P9UL:00000001": done reading request body.
2020-08-23 18:52:12.677 +03:00 [DBG] The request has an origin header: 'https://localhost:8001'.
2020-08-23 18:52:12.679 +03:00 [INF] CORS policy execution failed.
2020-08-23 18:52:12.680 +03:00 [INF] Request origin https://localhost:8001 does not have permission to access the resource.
2020-08-23 18:52:12.736 +03:00 [DBG] POST requests are not supported
2020-08-23 18:52:12.788 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth'
2020-08-23 18:52:12.794 +03:00 [DBG] Endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)' with route pattern 'api/Auth' is valid for the request path '/api/Auth'
2020-08-23 18:52:12.800 +03:00 [DBG] Request matched endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:52:12.802 +03:00 [INF] Executing endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:52:12.819 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-08-23 18:52:12.879 +03:00 [INF] Route matched with {action = "ByPwd", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] ByPwd(Identity.Simple.Models.PwdAuthRequest) on controller Identity.Simple.Controllers.AuthController (Identity.Simple).
2020-08-23 18:52:12.883 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-08-23 18:52:12.885 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-08-23 18:52:12.887 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-08-23 18:52:12.890 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-08-23 18:52:12.892 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-08-23 18:52:12.894 +03:00 [DBG] Executing controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 18:52:12.996 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2020-08-23 18:52:13.026 +03:00 [DBG] Executed controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 18:52:13.050 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 18:52:13.056 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' using the name '' in request data ...
2020-08-23 18:52:13.059 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2020-08-23 18:52:13.074 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Identity.Simple.Models.PwdAuthRequest'
2020-08-23 18:52:13.077 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:52:13.079 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:52:13.083 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 18:52:13.097 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:52:16.605 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2020-08-23 18:52:16.607 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2020-08-23 18:52:16.657 +03:00 [INF] Entity Framework Core 3.1.6 initialized 'IdentityCtx' using provider 'Microsoft.EntityFrameworkCore.InMemory' with options: StoreName=indetity.simple 
2020-08-23 18:52:16.832 +03:00 [DBG] queryContext => new QueryingEnumerable<User>(
    queryContext, 
    new ResultEnumerable(() => InMemoryShapedQueryCompilingExpressionVisitor.Table(
        queryContext: queryContext, 
        entityType: EntityType: User)
        .Where(valueBuffer => EntityMaterializerSource.TryReadValue<string>(valueBuffer, 9, Property: User.NormalizedEmail (string) Index MaxLength256) == InMemoryExpressionTranslatingExpressionVisitor.GetParameterValue<string>(
            queryContext: queryContext, 
            parameterName: "__normalizedEmail_0"))
        .SingleOrDefault())
        .Select(valueBuffer => new ValueBuffer(new object[]
        { 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 0, Property: User.Id (string) Required PK AfterSave:Throw), 
            (object)EntityMaterializerSource.TryReadValue<int>(valueBuffer, 1, Property: User.AccessFailedCount (int) Required), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 2, Property: User.Email (string) MaxLength256), 
            (object)EntityMaterializerSource.TryReadValue<bool>(valueBuffer, 3, Property: User.EmailConfirmed (bool) Required), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 4, Property: User.FacebookId (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 5, Property: User.GoogleId (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 6, Property: User.LinkedinId (string)), 
            (object)EntityMaterializerSource.TryReadValue<bool>(valueBuffer, 7, Property: User.LockoutEnabled (bool) Required), 
            (object)EntityMaterializerSource.TryReadValue<Nullable<DateTimeOffset>>(valueBuffer, 8, Property: User.LockoutEnd (Nullable<DateTimeOffset>)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 9, Property: User.NormalizedEmail (string) Index MaxLength256), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 10, Property: User.NormalizedUserName (string) Index MaxLength256), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 11, Property: User.PasswordHash (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 12, Property: User.PhoneNumber (string)), 
            (object)EntityMaterializerSource.TryReadValue<bool>(valueBuffer, 13, Property: User.PhoneNumberConfirmed (bool) Required), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 14, Property: User.Salt (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 15, Property: User.SecurityStamp (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 16, Property: User.UserName (string) MaxLength256) 
        })), 
    Func<QueryContext, ValueBuffer, User>, 
    Identity.Dal.IdentityCtx, 
    null
)
    .SingleOrDefault()
2020-08-23 18:52:37.237 +03:00 [INF] Entity Framework Core 3.1.6 initialized 'IdentityCtx' using provider 'Microsoft.EntityFrameworkCore.InMemory' with options: StoreName=indetity.simple 
2020-08-23 18:52:37.273 +03:00 [DBG] 'IdentityCtx' generated a value for the 'Id' property of new 'SimpleMessageResult' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:52:37.302 +03:00 [DBG] Context 'IdentityCtx' started tracking 'SimpleMessageResult' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:52:37.306 +03:00 [DBG] SaveChanges starting for 'IdentityCtx'.
2020-08-23 18:52:37.309 +03:00 [DBG] DetectChanges starting for 'IdentityCtx'.
2020-08-23 18:52:37.323 +03:00 [DBG] DetectChanges completed for 'IdentityCtx'.
2020-08-23 18:52:37.359 +03:00 [INF] Saved 1 entities to in-memory store.
2020-08-23 18:52:37.367 +03:00 [DBG] An 'SimpleMessageResult' entity tracked by 'IdentityCtx' changed from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:52:37.373 +03:00 [DBG] SaveChanges completed for 'IdentityCtx' with 1 entities written to the database.
2020-08-23 18:53:21.034 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-08-23 18:53:21.044 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2020-08-23 18:53:21.047 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2020-08-23 18:53:21.049 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-08-23 18:53:21.051 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-08-23 18:53:21.052 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-08-23 18:53:21.055 +03:00 [INF] Executing ObjectResult, writing value of type 'Identity.Domain.Features.Auth.Commands.PwdAuthCmd'.
2020-08-23 18:53:21.076 +03:00 [INF] Executed action Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple) in 68175.7128ms
2020-08-23 18:53:21.079 +03:00 [INF] Executed endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:53:21.084 +03:00 [INF] HTTP POST /api/Auth responded 200 in 68416.9418 ms
2020-08-23 18:53:21.091 +03:00 [DBG] 'IdentityCtx' disposed.
2020-08-23 18:53:21.095 +03:00 [INF] Request finished in 68438.3027ms 200 application/json; charset=utf-8
2020-08-23 18:56:18.816 +03:00 [DBG] Hosting starting
2020-08-23 18:56:19.040 +03:00 [INF] User profile is available. Using 'C:\Users\adwae\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-23 18:56:19.082 +03:00 [DBG] Reading data from file 'C:\Users\adwae\AppData\Local\ASP.NET\DataProtection-Keys\key-37a38d35-de78-4599-9855-bf9aa01642e4.xml'.
2020-08-23 18:56:19.110 +03:00 [DBG] Reading data from file 'C:\Users\adwae\AppData\Local\ASP.NET\DataProtection-Keys\key-59817979-158b-45ef-a6a2-f2360343a028.xml'.
2020-08-23 18:56:19.117 +03:00 [DBG] Found key "37a38d35-de78-4599-9855-bf9aa01642e4".
2020-08-23 18:56:19.124 +03:00 [DBG] Found key "59817979-158b-45ef-a6a2-f2360343a028".
2020-08-23 18:56:19.132 +03:00 [DBG] Considering key "59817979-158b-45ef-a6a2-f2360343a028" with expiration date "2020-10-04T17:37:43.3250722+00:00" as default key.
2020-08-23 18:56:19.161 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=3.1.3.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-08-23 18:56:19.166 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2020-08-23 18:56:19.171 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=3.1.3.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-08-23 18:56:19.176 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2020-08-23 18:56:19.184 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2020-08-23 18:56:19.192 +03:00 [DBG] Using key "59817979-158b-45ef-a6a2-f2360343a028" as the default key.
2020-08-23 18:56:19.194 +03:00 [DBG] Key ring with default key "59817979-158b-45ef-a6a2-f2360343a028" was loaded during application startup.
2020-08-23 18:56:19.523 +03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-08-23 18:56:19.600 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C321FB7814B4B11FA1E331D9EF01FA785796637D)
2020-08-23 18:56:19.661 +03:00 [INF] Now listening on: https://localhost:8001
2020-08-23 18:56:19.662 +03:00 [DBG] Loaded hosting startup assembly Identity.Simple
2020-08-23 18:56:19.664 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-08-23 18:56:19.665 +03:00 [INF] Hosting environment: Development
2020-08-23 18:56:19.667 +03:00 [INF] Content root path: E:\Projects\_mine\infrastructure\examples\identity\Identity.Simple
2020-08-23 18:56:19.668 +03:00 [DBG] Hosting started
2020-08-23 18:56:21.470 +03:00 [DBG] Connection id "0HM27FKA980VV" accepted.
2020-08-23 18:56:21.473 +03:00 [DBG] Connection id "0HM27FKA980VV" started.
2020-08-23 18:56:21.556 +03:00 [DBG] Connection id "0HM27FKA980VV" received FIN.
2020-08-23 18:56:21.557 +03:00 [DBG] Connection id "0HM27FKA98100" accepted.
2020-08-23 18:56:21.561 +03:00 [DBG] Connection id "0HM27FKA98100" started.
2020-08-23 18:56:21.575 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): При обработке сертификата произошла неизвестная ошибка.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.StartSendAuthResetSignal(ProtocolToken message, AsyncProtocolRequest asyncRequest, ExceptionDispatchInfo exception)
   at System.Net.Security.SslStream.CheckCompletionBeforeNextReceive(ProtocolToken message, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessReceivedBlob(Byte[] buffer, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslStream.ThrowIfExceptional()
   at System.Net.Security.SslStream.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-08-23 18:56:21.676 +03:00 [DBG] Connection id "0HM27FKA980VV" stopped.
2020-08-23 18:56:21.682 +03:00 [DBG] Connection id "0HM27FKA980VV" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-08-23 18:56:21.698 +03:00 [INF] Request starting HTTP/2 POST https://localhost:8001/api/Auth application/json 38
2020-08-23 18:56:21.706 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-08-23 18:56:21.713 +03:00 [DBG] Connection id "0HM27FKA98100", Request id "0HM27FKA98100:00000001": started reading request body.
2020-08-23 18:56:21.715 +03:00 [DBG] Connection id "0HM27FKA98100", Request id "0HM27FKA98100:00000001": done reading request body.
2020-08-23 18:56:21.724 +03:00 [DBG] The request has an origin header: 'https://localhost:8001'.
2020-08-23 18:56:21.726 +03:00 [INF] CORS policy execution failed.
2020-08-23 18:56:21.728 +03:00 [INF] Request origin https://localhost:8001 does not have permission to access the resource.
2020-08-23 18:56:21.779 +03:00 [DBG] POST requests are not supported
2020-08-23 18:56:21.816 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth'
2020-08-23 18:56:21.823 +03:00 [DBG] Endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)' with route pattern 'api/Auth' is valid for the request path '/api/Auth'
2020-08-23 18:56:21.826 +03:00 [DBG] Request matched endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:56:21.828 +03:00 [INF] Executing endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:56:21.841 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-08-23 18:56:21.908 +03:00 [INF] Route matched with {action = "ByPwd", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] ByPwd(Identity.Simple.Models.PwdAuthRequest) on controller Identity.Simple.Controllers.AuthController (Identity.Simple).
2020-08-23 18:56:21.911 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-08-23 18:56:21.913 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-08-23 18:56:21.915 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-08-23 18:56:21.918 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-08-23 18:56:21.920 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-08-23 18:56:21.923 +03:00 [DBG] Executing controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 18:56:22.019 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2020-08-23 18:56:22.037 +03:00 [DBG] Executed controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 18:56:22.056 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 18:56:22.064 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' using the name '' in request data ...
2020-08-23 18:56:22.067 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2020-08-23 18:56:22.075 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Identity.Simple.Models.PwdAuthRequest'
2020-08-23 18:56:22.077 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:56:22.079 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:56:22.080 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 18:56:22.093 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 18:56:29.221 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2020-08-23 18:56:29.226 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2020-08-23 18:56:29.280 +03:00 [INF] Entity Framework Core 3.1.6 initialized 'IdentityCtx' using provider 'Microsoft.EntityFrameworkCore.InMemory' with options: StoreName=indetity.simple 
2020-08-23 18:56:29.496 +03:00 [DBG] queryContext => new QueryingEnumerable<User>(
    queryContext, 
    new ResultEnumerable(() => InMemoryShapedQueryCompilingExpressionVisitor.Table(
        queryContext: queryContext, 
        entityType: EntityType: User)
        .Where(valueBuffer => EntityMaterializerSource.TryReadValue<string>(valueBuffer, 9, Property: User.NormalizedEmail (string) Index MaxLength256) == InMemoryExpressionTranslatingExpressionVisitor.GetParameterValue<string>(
            queryContext: queryContext, 
            parameterName: "__normalizedEmail_0"))
        .SingleOrDefault())
        .Select(valueBuffer => new ValueBuffer(new object[]
        { 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 0, Property: User.Id (string) Required PK AfterSave:Throw), 
            (object)EntityMaterializerSource.TryReadValue<int>(valueBuffer, 1, Property: User.AccessFailedCount (int) Required), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 2, Property: User.Email (string) MaxLength256), 
            (object)EntityMaterializerSource.TryReadValue<bool>(valueBuffer, 3, Property: User.EmailConfirmed (bool) Required), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 4, Property: User.FacebookId (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 5, Property: User.GoogleId (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 6, Property: User.LinkedinId (string)), 
            (object)EntityMaterializerSource.TryReadValue<bool>(valueBuffer, 7, Property: User.LockoutEnabled (bool) Required), 
            (object)EntityMaterializerSource.TryReadValue<Nullable<DateTimeOffset>>(valueBuffer, 8, Property: User.LockoutEnd (Nullable<DateTimeOffset>)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 9, Property: User.NormalizedEmail (string) Index MaxLength256), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 10, Property: User.NormalizedUserName (string) Index MaxLength256), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 11, Property: User.PasswordHash (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 12, Property: User.PhoneNumber (string)), 
            (object)EntityMaterializerSource.TryReadValue<bool>(valueBuffer, 13, Property: User.PhoneNumberConfirmed (bool) Required), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 14, Property: User.Salt (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 15, Property: User.SecurityStamp (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 16, Property: User.UserName (string) MaxLength256) 
        })), 
    Func<QueryContext, ValueBuffer, User>, 
    Identity.Dal.IdentityCtx, 
    null
)
    .SingleOrDefault()
2020-08-23 18:56:29.524 +03:00 [INF] Entity Framework Core 3.1.6 initialized 'IdentityCtx' using provider 'Microsoft.EntityFrameworkCore.InMemory' with options: StoreName=indetity.simple 
2020-08-23 18:56:29.559 +03:00 [DBG] 'IdentityCtx' generated a value for the 'Id' property of new 'SimpleMessageResult' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:56:29.589 +03:00 [DBG] Context 'IdentityCtx' started tracking 'SimpleMessageResult' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:56:29.594 +03:00 [DBG] SaveChanges starting for 'IdentityCtx'.
2020-08-23 18:56:29.598 +03:00 [DBG] DetectChanges starting for 'IdentityCtx'.
2020-08-23 18:56:29.608 +03:00 [DBG] DetectChanges completed for 'IdentityCtx'.
2020-08-23 18:56:29.623 +03:00 [INF] Saved 1 entities to in-memory store.
2020-08-23 18:56:29.632 +03:00 [DBG] An 'SimpleMessageResult' entity tracked by 'IdentityCtx' changed from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 18:56:29.639 +03:00 [DBG] SaveChanges completed for 'IdentityCtx' with 1 entities written to the database.
2020-08-23 18:56:33.202 +03:00 [INF] Executed action Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple) in 11277.0951ms
2020-08-23 18:56:33.207 +03:00 [INF] Executed endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 18:56:33.233 +03:00 [ERR] HTTP POST /api/Auth responded 500 in 11521.6605 ms
2020-08-23 18:56:33.242 +03:00 [DBG] 'IdentityCtx' disposed.
2020-08-23 18:56:33.248 +03:00 [INF] Request finished in 11552.3429ms 500 application/json
2020-08-23 23:43:51.886 +03:00 [DBG] Hosting starting
2020-08-23 23:43:52.021 +03:00 [INF] User profile is available. Using 'C:\Users\adwae\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-23 23:43:52.063 +03:00 [DBG] Reading data from file 'C:\Users\adwae\AppData\Local\ASP.NET\DataProtection-Keys\key-37a38d35-de78-4599-9855-bf9aa01642e4.xml'.
2020-08-23 23:43:52.104 +03:00 [DBG] Reading data from file 'C:\Users\adwae\AppData\Local\ASP.NET\DataProtection-Keys\key-59817979-158b-45ef-a6a2-f2360343a028.xml'.
2020-08-23 23:43:52.117 +03:00 [DBG] Found key "37a38d35-de78-4599-9855-bf9aa01642e4".
2020-08-23 23:43:52.134 +03:00 [DBG] Found key "59817979-158b-45ef-a6a2-f2360343a028".
2020-08-23 23:43:52.153 +03:00 [DBG] Considering key "59817979-158b-45ef-a6a2-f2360343a028" with expiration date "2020-10-04T17:37:43.3250722+00:00" as default key.
2020-08-23 23:43:52.193 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=3.1.3.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-08-23 23:43:52.197 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2020-08-23 23:43:52.200 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=3.1.3.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2020-08-23 23:43:52.207 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2020-08-23 23:43:52.215 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2020-08-23 23:43:52.223 +03:00 [DBG] Using key "59817979-158b-45ef-a6a2-f2360343a028" as the default key.
2020-08-23 23:43:52.226 +03:00 [DBG] Key ring with default key "59817979-158b-45ef-a6a2-f2360343a028" was loaded during application startup.
2020-08-23 23:43:52.596 +03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-08-23 23:43:52.691 +03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C321FB7814B4B11FA1E331D9EF01FA785796637D)
2020-08-23 23:43:52.751 +03:00 [INF] Now listening on: https://localhost:8001
2020-08-23 23:43:52.752 +03:00 [DBG] Loaded hosting startup assembly Identity.Simple
2020-08-23 23:43:52.755 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-08-23 23:43:52.756 +03:00 [INF] Hosting environment: Development
2020-08-23 23:43:52.757 +03:00 [INF] Content root path: E:\Projects\_mine\infrastructure\examples\identity\Identity.Simple
2020-08-23 23:43:52.758 +03:00 [DBG] Hosting started
2020-08-23 23:43:56.793 +03:00 [DBG] Connection id "0HM27KL0OQO5Q" accepted.
2020-08-23 23:43:56.796 +03:00 [DBG] Connection id "0HM27KL0OQO5Q" started.
2020-08-23 23:43:56.879 +03:00 [DBG] Connection id "0HM27KL0OQO5Q" received FIN.
2020-08-23 23:43:56.881 +03:00 [DBG] Connection id "0HM27KL0OQO5R" accepted.
2020-08-23 23:43:56.883 +03:00 [DBG] Connection id "0HM27KL0OQO5R" started.
2020-08-23 23:43:56.900 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): При обработке сертификата произошла неизвестная ошибка.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.StartSendAuthResetSignal(ProtocolToken message, AsyncProtocolRequest asyncRequest, ExceptionDispatchInfo exception)
   at System.Net.Security.SslStream.CheckCompletionBeforeNextReceive(ProtocolToken message, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessReceivedBlob(Byte[] buffer, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslStream.ThrowIfExceptional()
   at System.Net.Security.SslStream.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-08-23 23:43:56.980 +03:00 [DBG] Connection id "0HM27KL0OQO5Q" stopped.
2020-08-23 23:43:56.985 +03:00 [DBG] Connection id "0HM27KL0OQO5Q" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-08-23 23:43:57.000 +03:00 [INF] Request starting HTTP/2 POST https://localhost:8001/api/Auth application/json 38
2020-08-23 23:43:57.004 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-08-23 23:43:57.014 +03:00 [DBG] Connection id "0HM27KL0OQO5R", Request id "0HM27KL0OQO5R:00000001": started reading request body.
2020-08-23 23:43:57.017 +03:00 [DBG] Connection id "0HM27KL0OQO5R", Request id "0HM27KL0OQO5R:00000001": done reading request body.
2020-08-23 23:43:57.022 +03:00 [DBG] The request has an origin header: 'https://localhost:8001'.
2020-08-23 23:43:57.024 +03:00 [INF] CORS policy execution failed.
2020-08-23 23:43:57.025 +03:00 [INF] Request origin https://localhost:8001 does not have permission to access the resource.
2020-08-23 23:43:57.071 +03:00 [DBG] POST requests are not supported
2020-08-23 23:43:57.100 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth'
2020-08-23 23:43:57.105 +03:00 [DBG] Endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)' with route pattern 'api/Auth' is valid for the request path '/api/Auth'
2020-08-23 23:43:57.107 +03:00 [DBG] Request matched endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 23:43:57.110 +03:00 [INF] Executing endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 23:43:57.121 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-08-23 23:43:57.189 +03:00 [INF] Route matched with {action = "ByPwd", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] ByPwd(Identity.Simple.Models.PwdAuthRequest) on controller Identity.Simple.Controllers.AuthController (Identity.Simple).
2020-08-23 23:43:57.194 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-08-23 23:43:57.197 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-08-23 23:43:57.201 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-08-23 23:43:57.204 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-08-23 23:43:57.206 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-08-23 23:43:57.212 +03:00 [DBG] Executing controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 23:43:57.319 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2020-08-23 23:43:57.351 +03:00 [DBG] Executed controller factory for controller Identity.Simple.Controllers.AuthController (Identity.Simple)
2020-08-23 23:43:57.375 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 23:43:57.380 +03:00 [DBG] Attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' using the name '' in request data ...
2020-08-23 23:43:57.387 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2020-08-23 23:43:57.412 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Identity.Simple.Models.PwdAuthRequest'
2020-08-23 23:43:57.414 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 23:43:57.415 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 23:43:57.417 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest' ...
2020-08-23 23:43:57.423 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'Identity.Simple.Models.PwdAuthRequest'.
2020-08-23 23:43:57.995 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2020-08-23 23:43:57.998 +03:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2020-08-23 23:43:58.072 +03:00 [INF] Entity Framework Core 3.1.6 initialized 'IdentityCtx' using provider 'Microsoft.EntityFrameworkCore.InMemory' with options: StoreName=indetity.simple 
2020-08-23 23:43:58.294 +03:00 [DBG] queryContext => new QueryingEnumerable<User>(
    queryContext, 
    new ResultEnumerable(() => InMemoryShapedQueryCompilingExpressionVisitor.Table(
        queryContext: queryContext, 
        entityType: EntityType: User)
        .Where(valueBuffer => EntityMaterializerSource.TryReadValue<string>(valueBuffer, 9, Property: User.NormalizedEmail (string) Index MaxLength256) == InMemoryExpressionTranslatingExpressionVisitor.GetParameterValue<string>(
            queryContext: queryContext, 
            parameterName: "__normalizedEmail_0"))
        .SingleOrDefault())
        .Select(valueBuffer => new ValueBuffer(new object[]
        { 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 0, Property: User.Id (string) Required PK AfterSave:Throw), 
            (object)EntityMaterializerSource.TryReadValue<int>(valueBuffer, 1, Property: User.AccessFailedCount (int) Required), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 2, Property: User.Email (string) MaxLength256), 
            (object)EntityMaterializerSource.TryReadValue<bool>(valueBuffer, 3, Property: User.EmailConfirmed (bool) Required), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 4, Property: User.FacebookId (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 5, Property: User.GoogleId (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 6, Property: User.LinkedinId (string)), 
            (object)EntityMaterializerSource.TryReadValue<bool>(valueBuffer, 7, Property: User.LockoutEnabled (bool) Required), 
            (object)EntityMaterializerSource.TryReadValue<Nullable<DateTimeOffset>>(valueBuffer, 8, Property: User.LockoutEnd (Nullable<DateTimeOffset>)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 9, Property: User.NormalizedEmail (string) Index MaxLength256), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 10, Property: User.NormalizedUserName (string) Index MaxLength256), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 11, Property: User.PasswordHash (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 12, Property: User.PhoneNumber (string)), 
            (object)EntityMaterializerSource.TryReadValue<bool>(valueBuffer, 13, Property: User.PhoneNumberConfirmed (bool) Required), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 14, Property: User.Salt (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 15, Property: User.SecurityStamp (string)), 
            EntityMaterializerSource.TryReadValue<string>(valueBuffer, 16, Property: User.UserName (string) MaxLength256) 
        })), 
    Func<QueryContext, ValueBuffer, User>, 
    Identity.Dal.IdentityCtx, 
    null
)
    .SingleOrDefault()
2020-08-23 23:43:58.322 +03:00 [INF] Entity Framework Core 3.1.6 initialized 'IdentityCtx' using provider 'Microsoft.EntityFrameworkCore.InMemory' with options: StoreName=indetity.simple 
2020-08-23 23:43:58.377 +03:00 [DBG] 'IdentityCtx' generated a value for the 'Id' property of new 'SimpleMessageResult' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 23:43:58.423 +03:00 [DBG] Context 'IdentityCtx' started tracking 'SimpleMessageResult' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 23:43:58.436 +03:00 [DBG] SaveChanges starting for 'IdentityCtx'.
2020-08-23 23:43:58.440 +03:00 [DBG] DetectChanges starting for 'IdentityCtx'.
2020-08-23 23:43:58.465 +03:00 [DBG] DetectChanges completed for 'IdentityCtx'.
2020-08-23 23:43:58.480 +03:00 [INF] Saved 1 entities to in-memory store.
2020-08-23 23:43:58.488 +03:00 [DBG] An 'SimpleMessageResult' entity tracked by 'IdentityCtx' changed from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2020-08-23 23:43:58.497 +03:00 [DBG] SaveChanges completed for 'IdentityCtx' with 1 entities written to the database.
2020-08-23 23:43:58.596 +03:00 [INF] Executed action Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple) in 1382.4098ms
2020-08-23 23:43:58.602 +03:00 [INF] Executed endpoint 'Identity.Simple.Controllers.AuthController.ByPwd (Identity.Simple)'
2020-08-23 23:43:58.632 +03:00 [ERR] HTTP POST /api/Auth responded 500 in 1620.7477 ms
2020-08-23 23:43:58.638 +03:00 [DBG] 'IdentityCtx' disposed.
2020-08-23 23:43:58.642 +03:00 [INF] Request finished in 1644.0227ms 500 application/json
